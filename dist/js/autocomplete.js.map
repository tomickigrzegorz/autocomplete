{"version":3,"file":"autocomplete.js","sources":["../../sources/js/utils/function.js","../../sources/js/utils/keyCodes.js","../../sources/js/script.js"],"sourcesContent":["/**\r\n * Check is a Object\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nexport const isObject = (value) =>\r\n  value && typeof value === \"object\" && value.constructor === Object;\r\n\r\n/**\r\n * Check if is a Promise\r\n * https://stackoverflow.com/a/53955664/10424385\r\n *\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nexport const isPromise = (value) =>\r\n  Boolean(value && typeof value.then === \"function\");\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {Object} object\r\n */\r\nexport const setAttributes = (el, object) => {\r\n  for (let key in object) {\r\n    if (key === \"addClass\") {\r\n      classList(el, \"add\", object[key]);\r\n    } else if (key === \"removeClass\") {\r\n      classList(el, \"remove\", object[key]);\r\n    } else {\r\n      el.setAttribute(key, object[key]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get first element from child\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {HTMLELement}\r\n */\r\nexport const getFirstElement = (element) =>\r\n  (element.firstElementChild || element).textContent.trim();\r\n\r\n/**\r\n * Scroll to top result-list\r\n * @param {HTMLElement} resultList\r\n * @param {HTMLElement} resultWrap\r\n */\r\nexport const scrollResultsToTop = (resultList, resultWrap) => {\r\n  // if there is an overflow of ul element, after\r\n  // opening we always move ul to the top of the results\r\n  resultList.scrollTop = resultList.offsetTop - resultWrap.offsetHeight;\r\n};\r\n\r\n/**\r\n * Adding role, tabindex, aria and call handleMouse\r\n *\r\n * @param {HTMLElement} itemsLi\r\n */\r\nexport const addAriaToAllLiElements = (itemsLi) => {\r\n  // add role to all li elements\r\n  for (let i = 0; i < itemsLi.length; i++) {\r\n    setAttributes(itemsLi[i], {\r\n      role: \"option\",\r\n      tabindex: \"-1\",\r\n      \"aria-selected\": \"false\",\r\n      \"aria-setsize\": itemsLi.length,\r\n      // https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-posinset\r\n      \"aria-posinset\": i + 1,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Show btn to clear data\r\n *\r\n * @param {HTMLElement} clearButton - button to clear data\r\n * @param {Function} destroy - destroy function\r\n */\r\nexport const showBtnToClearData = (clearButton = false, destroy) => {\r\n  if (!clearButton) return;\r\n\r\n  classList(clearButton, \"remove\", \"hidden\");\r\n  // add event to clear button\r\n  onEvent(clearButton, \"click\", destroy);\r\n};\r\n\r\n/**\r\n * ClassList add/remove/contains\r\n *\r\n * @param {HTMLElement} element - html element\r\n * @param {String} action - add/remove/contains\r\n * @param {String} className - class name\r\n */\r\nexport const classList = (element, action, className) =>\r\n  element.classList[action](className);\r\n\r\n/**\r\n * Set aria-activedescendant\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {String} type\r\n */\r\nexport const setAriaActivedescendant = (root, type) => {\r\n  setAttributes(root, {\r\n    \"aria-activedescendant\": type || \"\",\r\n  });\r\n};\r\n\r\n/**\r\n * Get height of ul without group class\r\n *\r\n * @param {String} outputUl\r\n * @param {String} classGroup\r\n * @returns {Number}\r\n */\r\nexport const getClassGroupHeight = (outputUl, classGroup) => {\r\n  // get height of ul without group class\r\n  const allLiElements = document.querySelectorAll(\r\n    `#${outputUl} > li:not(.${classGroup})`,\r\n  );\r\n  let height = 0;\r\n  [].slice.call(allLiElements).map((el) => (height += el.offsetHeight));\r\n\r\n  // return height\r\n  return height;\r\n};\r\n\r\n/**\r\n * Scroll into view when press up/down arrows\r\n *\r\n * @param {HTMLElement} target\r\n * @param {HTMLElement} outputUl\r\n * @param {String} classGroup\r\n * @param {HTMLElement} resultList\r\n */\r\nexport const followActiveElement = (\r\n  target,\r\n  outputUl,\r\n  classGroup,\r\n  resultList,\r\n) => {\r\n  const previusElement = resultList.previousSibling;\r\n\r\n  const previusElementHeight = previusElement ? previusElement.offsetHeight : 0;\r\n\r\n  if (target.getAttribute(\"aria-posinset\") == \"0\") {\r\n    resultList.scrollTop =\r\n      target.offsetTop - getClassGroupHeight(outputUl, classGroup);\r\n  }\r\n\r\n  if (target.offsetTop - previusElementHeight < resultList.scrollTop) {\r\n    resultList.scrollTop = target.offsetTop - previusElementHeight;\r\n  } else {\r\n    const offsetBottom =\r\n      target.offsetTop + target.offsetHeight - previusElementHeight;\r\n    const scrollBottom = resultList.scrollTop + resultList.offsetHeight;\r\n    if (offsetBottom > scrollBottom) {\r\n      resultList.scrollTop = offsetBottom - resultList.offsetHeight;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Create output-list and put after search input\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {HTMLElement} resultList - output-list ul\r\n * @param {String} outputUl - id name of output-list\r\n * @param {HTMLElement} resultWrap - wrapper ul element\r\n * @param {String} prefix - add prefix to all class auto\r\n */\r\nexport const output = (root, resultList, outputUl, resultWrap, prefix) => {\r\n  // set attribute to results-list\r\n  setAttributes(resultList, {\r\n    id: outputUl,\r\n    tabIndex: \"0\",\r\n    role: \"listbox\",\r\n  });\r\n\r\n  // add class to wrap element\r\n  setAttributes(resultWrap, {\r\n    addClass: `${prefix}-results-wrapper`,\r\n  });\r\n\r\n  // insert the results into the wrap element\r\n  resultWrap.insertAdjacentElement(\"beforeend\", resultList);\r\n\r\n  // insert the wrap element after the search input\r\n  root.parentNode.insertBefore(resultWrap, root.nextSibling);\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param {String} type - type of element\r\n * @returns {HTMLDivElement}\r\n */\r\nexport const createElement = (type) => document.createElement(type);\r\n\r\n/**\r\n * Get element\r\n *\r\n * @param {String} element\r\n * @returns {HTMLElement}\r\n */\r\nexport const select = (element) => document.querySelector(element);\r\n\r\n/**\r\n * Event listeners\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} action\r\n * @param {Function} callback\r\n */\r\nexport const onEvent = (element, action, callback) => {\r\n  element.addEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Remove event listeners\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} action\r\n * @param {Function} callback\r\n */\r\nexport const offEvent = (element, action, callback) => {\r\n  element.removeEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Add event listeners to all elements\r\n *\r\n * @param {HTMLElement} id\r\n *\r\n */\r\nexport const ariaActiveDescendantDefault = (id) => {\r\n  return {\r\n    \"aria-owns\": id,\r\n    \"aria-expanded\": \"false\",\r\n    \"aria-autocomplete\": \"list\",\r\n    role: \"combobox\",\r\n    removeClass: \"auto-expanded\",\r\n  };\r\n};\r\n","/**\r\n * Key codes\r\n */\r\nconst keyCodes = {\r\n  ESC: 27,\r\n  ENTER: 13,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  TAB: 9,\r\n};\r\n\r\nexport default keyCodes;\r\n","import {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n  ariaActiveDescendantDefault,\r\n} from \"./utils/function\";\r\n\r\nimport keyCodes from \"./utils/keyCodes\";\r\n\r\n/**\r\n * @class Autocomplete\r\n */\r\nexport default class Autocomplete {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {String} element\r\n   * @param {Object} object\r\n   */\r\n  constructor(\r\n    element,\r\n    {\r\n      delay = 500,\r\n      clearButton = true,\r\n      clearButtonOnInitial = false,\r\n      howManyCharacters = 1,\r\n      selectFirst = false,\r\n      insertToInput = false,\r\n      showValuesOnClick = false,\r\n      showAllValues = false,\r\n      cache = false,\r\n      disableCloseOnSelect = false,\r\n      preventScrollUp = false,\r\n      removeResultsWhenInputIsEmpty = false,\r\n      regex = { expression: /[|\\\\{}()[\\]^$+*?]/g, replacement: \"\\\\$&\" },\r\n      classGroup,\r\n      classPreventClosing,\r\n      classPrefix,\r\n      ariaLabelClear,\r\n      onSearch,\r\n      onResults = () => {},\r\n      onSubmit = () => {},\r\n      onOpened = () => {},\r\n      onReset = () => {},\r\n      onRender = () => {},\r\n      onClose = () => {},\r\n      noResults = () => {},\r\n      onSelectedItem = () => {},\r\n    },\r\n  ) {\r\n    this._id = element;\r\n    this._root = document.getElementById(element);\r\n    this._onSearch = isPromise(onSearch)\r\n      ? onSearch\r\n      : ({ currentValue, element }) =>\r\n          Promise.resolve(onSearch({ currentValue, element }));\r\n    this._onResults = onResults;\r\n    this._onRender = onRender;\r\n    this._onSubmit = onSubmit;\r\n    this._onSelected = onSelectedItem;\r\n    this._onOpened = onOpened;\r\n    this._onReset = onReset;\r\n    this._noResults = noResults;\r\n    this._onClose = onClose;\r\n\r\n    this._delay = delay;\r\n    this._characters = howManyCharacters;\r\n    this._clearButton = clearButton;\r\n    this._clearButtonOnInitial = clearButtonOnInitial;\r\n    this._selectFirst = selectFirst;\r\n    this._toInput = insertToInput;\r\n    this._showValuesOnClick = showValuesOnClick;\r\n    this._showAllValues = showAllValues;\r\n    this._classGroup = classGroup;\r\n    this._prevClosing = classPreventClosing;\r\n    this._clearBtnAriLabel = ariaLabelClear\r\n      ? ariaLabelClear\r\n      : \"clear the search query\";\r\n    this._prefix = classPrefix ? `${classPrefix}-auto` : \"auto\";\r\n    this._disable = disableCloseOnSelect;\r\n    this._preventScrollUp = preventScrollUp;\r\n    this._removeResultsWhenInputIsEmpty = removeResultsWhenInputIsEmpty;\r\n\r\n    // default config\r\n    this._cache = cache;\r\n    this._timeout = null;\r\n    this._outputUl = `${this._prefix}-${this._id}-results`;\r\n    this._cacheData = `data-cache-auto-${this._id}`;\r\n    this._isLoading = `${this._prefix}-is-loading`;\r\n    this._isActive = `${this._prefix}-is-active`;\r\n    this._activeList = `${this._prefix}-selected`;\r\n    this._selectedOption = `${this._prefix}-selected-option`;\r\n    this._err = `${this._prefix}-error`;\r\n    this._resultWrap = createElement(\"div\");\r\n    this._resultList = createElement(\"ul\");\r\n    this._clearBtn = createElement(\"button\");\r\n\r\n    // ----------------------------------------\r\n    // regex\r\n\r\n    this._regex = regex;\r\n    this._defaultExpression = {\r\n      expression: /[|\\\\{}()[\\]^$+*?]/g,\r\n      replacement: \"\\\\$&\",\r\n    };\r\n\r\n    // if regex is don't have replacement then set default\r\n    if (!this._regex.replacement) {\r\n      this._regex.replacement = this._defaultExpression.replacement;\r\n    }\r\n\r\n    // if regex is don't have expression then set default\r\n    if (!this._regex.expression) {\r\n      this._regex.expression = this._defaultExpression.expression;\r\n    }\r\n\r\n    // ----------------------------------------\r\n\r\n    this._initial();\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  _initial = () => {\r\n    this._clearbutton();\r\n\r\n    const ariaAcrivedescentDefault = ariaActiveDescendantDefault(\r\n      this._outputUl,\r\n    );\r\n    setAttributes(this._root, ariaAcrivedescentDefault);\r\n\r\n    output(\r\n      this._root,\r\n      this._resultList,\r\n      this._outputUl,\r\n      this._resultWrap,\r\n      this._prefix,\r\n    );\r\n\r\n    // default aria\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n\r\n    // show all values on click root input\r\n    this._showValuesOnClick && onEvent(this._root, \"click\", this._handleInput);\r\n\r\n    // sgow all values\r\n    if (this._showAllValues) {\r\n      const config = { root: this._root, type: \"load\" };\r\n      onEvent(this._root, \"DOMContentLoaded\", this._handleInput(config));\r\n    }\r\n\r\n    // calback functions\r\n    this._onRender({\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // show clear button if\r\n    if (this._clearButtonOnInitial) {\r\n      showBtnToClearData(this._clearBtn, this.destroy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Actions on input\r\n   *\r\n   * @param {String} type - set attribute depending on type\r\n   * @param {String} target\r\n   */\r\n  _cacheAct = (type, target) => {\r\n    if (!this._cache) return;\r\n\r\n    if (type === \"update\") {\r\n      this._root.setAttribute(this._cacheData, target?.value);\r\n    } else if (type === \"remove\") {\r\n      this._root.removeAttribute(this._cacheData);\r\n    } else {\r\n      this._root.value = this._root.getAttribute(this._cacheData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleInput = ({ target, type }) => {\r\n    if (\r\n      this._root.getAttribute(\"aria-expanded\") === \"true\" &&\r\n      type === \"click\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // replace all special characters\r\n    const regex = target?.value.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n\r\n    // update data attribute cache\r\n    this._cacheAct(\"update\", target);\r\n\r\n    const delay =\r\n      this._showValuesOnClick || this._showAllValues ? 0 : this._delay;\r\n    // clear timeout\r\n    clearTimeout(this._timeout);\r\n    this._timeout = setTimeout(() => {\r\n      // removeResultsWhenInputIsEmpty\r\n      // remove results when input is empty\r\n      if (this._removeResultsWhenInputIsEmpty) {\r\n        if (target?.value.length === 0) {\r\n          this.destroy();\r\n          return;\r\n        }\r\n      }\r\n\r\n      this._searchItem(regex?.trim());\r\n    }, delay);\r\n  };\r\n\r\n  /**\r\n   * Default aria\r\n   */\r\n  _reset = () => {\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    const ariaAcrivedescentDefault = ariaActiveDescendantDefault(\r\n      this._outputUl,\r\n    );\r\n\r\n    const ariaAcrivedescent = this._preventScrollUp\r\n      ? ariaAcrivedescentDefault\r\n      : { ...ariaAcrivedescentDefault, \"aria-activedescendant\": \"\" };\r\n\r\n    // set attributes to root - input\r\n    setAttributes(this._root, ariaAcrivedescent);\r\n\r\n    if (!this._preventScrollUp) {\r\n      // set default aria-selected, remove id and remove class 'auto-selected'\r\n      this._removeAria(select(`.${this._activeList}`));\r\n\r\n      // set index\r\n      this._index = this._selectFirst ? 0 : -1;\r\n    }\r\n\r\n    // remove result when lengh = 0 and insertToInput is false\r\n    // https://github.com/tomickigrzegorz/autocomplete/issues/136\r\n    if (\r\n      (this._matches?.length == 0 && !this._toInput) ||\r\n      this._showValuesOnClick\r\n    ) {\r\n      this._resultList.textContent = \"\";\r\n    }\r\n\r\n    // callback function\r\n    this._onClose();\r\n  };\r\n\r\n  /**\r\n   * The async function gets the text from the search\r\n   * and returns the matching array\r\n   *\r\n   * @param {String} value\r\n   */\r\n  _searchItem = (value) => {\r\n    this._value = value;\r\n\r\n    // if searching show loading icon\r\n    this._onLoading(true);\r\n\r\n    // hide button clear\r\n    showBtnToClearData(this._clearBtn, this.destroy);\r\n\r\n    // if there is no value and clearButton is true\r\n    if ((!value || value?.length === 0) && this._clearButton) {\r\n      classList(this._clearBtn, \"add\", \"hidden\");\r\n    }\r\n\r\n    // if declare characters more then value.len and showAll is false\r\n    // remove class isActive\r\n    if (\r\n      this._characters > value?.length &&\r\n      !this._showValuesOnClick &&\r\n      !this._showAllValues\r\n    ) {\r\n      this._onLoading();\r\n      return;\r\n    }\r\n\r\n    // callblack function onSearch\r\n    this._onSearch({ currentValue: value, element: this._root })\r\n      .then((result) => {\r\n        const rootValueLength = this._root.value.length;\r\n        const resultLength = result.length;\r\n        // set no result\r\n        this._matches = Array.isArray(result)\r\n          ? result\r\n          : JSON.parse(JSON.stringify(result));\r\n\r\n        this._onLoading();\r\n        this._error();\r\n\r\n        // if use destroy() method\r\n        if (resultLength === 0 && rootValueLength === 0) {\r\n          classList(this._clearBtn, \"add\", \"hidden\");\r\n        }\r\n\r\n        if (resultLength === 0 && rootValueLength) {\r\n          classList(this._root, \"remove\", \"auto-expanded\");\r\n          this._reset();\r\n          this._noResults({\r\n            element: this._root,\r\n            currentValue: value,\r\n            template: this._results,\r\n          });\r\n          this._events();\r\n        } else if (resultLength > 0 || isObject(result)) {\r\n          this._index = this._selectFirst ? 0 : -1;\r\n          this._results();\r\n          this._events();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this._onLoading();\r\n        this._reset();\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Set or remove loading class\r\n   *\r\n   * @param {Boolean} type\r\n   */\r\n  _onLoading = (type) =>\r\n    this._root.parentNode.classList[type ? \"add\" : \"remove\"](this._isLoading);\r\n\r\n  /**\r\n   * Set error class to the root element\r\n   */\r\n  _error = () => classList(this._root, \"remove\", this._err);\r\n\r\n  /**\r\n   * Events\r\n   */\r\n  _events = () => {\r\n    // handle click on keydown [up, down, enter, tab, esc]\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n\r\n    // close expanded items\r\n    if (!this._showAllValues) {\r\n      onEvent(document, \"click\", this._handleDocClick);\r\n    }\r\n\r\n    // temporarily disabled mouseleave\r\n    [\"mousemove\", \"click\"].map((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Results\r\n   *\r\n   * @param {HTMLElement|String} template - html or string returned from the function,\r\n   * look at the example - https://github.com/tomickigrzegorz/autocomplete/blob/master/docs/js/examples/no-results.js#L30\r\n   */\r\n  _results = (template) => {\r\n    // set attribute to root\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"true\",\r\n      addClass: `${this._prefix}-expanded`,\r\n    });\r\n\r\n    // clear result list\r\n    this._resultList.textContent = \"\";\r\n\r\n    // add all found records to otput ul\r\n    const dataResults =\r\n      this._matches.length === 0\r\n        ? this._onResults({\r\n            currentValue: this._value,\r\n            matches: 0,\r\n            template,\r\n          })\r\n        : this._onResults({\r\n            currentValue: this._value,\r\n            matches: this._matches,\r\n            classGroup: this._classGroup,\r\n          });\r\n\r\n    // add data to ul\r\n    this._resultList.insertAdjacentHTML(\"afterbegin\", dataResults);\r\n\r\n    // add class isActive\r\n    classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n    const checkIfClassGroupExist = this._classGroup\r\n      ? `:not(.${this._classGroup})`\r\n      : \"\";\r\n\r\n    this._itemsLi = document.querySelectorAll(\r\n      `#${this._outputUl} > li${checkIfClassGroupExist}`,\r\n    );\r\n\r\n    // adding role, tabindex and aria\r\n    addAriaToAllLiElements(this._itemsLi);\r\n\r\n    // action on open results\r\n    this._onOpened({\r\n      type: \"results\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // select first element\r\n    this._selectFirstElement();\r\n\r\n    // move the view item to the first item\r\n    // this.resultList.scrollTop = 0;\r\n    // if (this._preventScrollUp) return;\r\n    scrollResultsToTop(this._resultList, this._resultWrap);\r\n  };\r\n\r\n  /**\r\n   * Hangle click on document\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleDocClick = ({ target }) => {\r\n    let disableClose = null;\r\n\r\n    // if 'target' is a ul and 'disableCloseOnSelect'\r\n    // is a 'true' set 'disableClose' on true\r\n    if (\r\n      (target.closest(\"ul\") && this._disable) ||\r\n      // when class classDisableClose\r\n      // then do not not close results\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      disableClose = true;\r\n    }\r\n\r\n    if (target.id !== this._id && !disableClose) {\r\n      this._reset();\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select first element\r\n   */\r\n  _selectFirstElement = () => {\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    if (!this._selectFirst) {\r\n      return;\r\n    }\r\n\r\n    const { firstElementChild } = this._resultList;\r\n\r\n    const classSelectFirst =\r\n      this._classGroup && this._matches.length > 0 && this._selectFirst\r\n        ? firstElementChild.nextElementSibling\r\n        : firstElementChild;\r\n\r\n    // calback function onSelect when first element is true\r\n\r\n    this._onSelected({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      currentValue: this._root.value,\r\n    });\r\n\r\n    // set attribute to first element\r\n    setAttributes(classSelectFirst, {\r\n      id: `${this._selectedOption}-0`,\r\n      addClass: this._activeList,\r\n      \"aria-selected\": \"true\",\r\n    });\r\n\r\n    // set aria active descendant\r\n    setAriaActivedescendant(this._root, `${this._selectedOption}-0`);\r\n  };\r\n\r\n  /**\r\n   * show items when items.length > 0 and is not empty\r\n   */\r\n  _handleShowItems = () => {\r\n    // if resultWrap is not active and resultList is not empty\r\n    if (\r\n      this._resultList.textContent.length > 0 &&\r\n      !classList(this._resultWrap, \"contains\", this._isActive)\r\n    ) {\r\n      // set attribute to root\r\n      setAttributes(this._root, {\r\n        \"aria-expanded\": \"true\",\r\n        addClass: `${this._prefix}-expanded`,\r\n      });\r\n\r\n      // add isActive class to resultWrap\r\n      classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n      // move the view item to the first item\r\n      // this.resultList.scrollTop = 0;\r\n      if (!this._preventScrollUp) {\r\n        scrollResultsToTop(this._resultList, this._resultWrap);\r\n        // select first element\r\n        this._selectFirstElement();\r\n      }\r\n\r\n      // callback function\r\n      this._onOpened({\r\n        type: \"showItems\",\r\n        element: this._root,\r\n        results: this._resultList,\r\n      });\r\n\r\n      if (!this._cache) return;\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adding text from the list when li is clicking\r\n   * or adding aria-selected to li elements\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleMouse = (event) => {\r\n    event.preventDefault();\r\n\r\n    const { target, type } = event;\r\n    const targetClosest = target.closest(\"li\");\r\n    const targetClosestRole = targetClosest?.hasAttribute(\"role\");\r\n    const activeClass = this._activeList;\r\n    const activeClassElement = select(`.${activeClass}`);\r\n\r\n    if (\r\n      !targetClosest ||\r\n      !targetClosestRole ||\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (type === \"click\") {\r\n      // click on li get element\r\n      // get text from clicked li\r\n      this._getTextFromLi(targetClosest);\r\n    }\r\n\r\n    if (\r\n      type === \"mousemove\" &&\r\n      !classList(targetClosest, \"contains\", activeClass)\r\n    ) {\r\n      this._removeAria(activeClassElement);\r\n\r\n      // add aria to li\r\n      this._setAria(targetClosest);\r\n      this._index = this._indexLiSelected(targetClosest);\r\n\r\n      this._onSelected({\r\n        index: this._index,\r\n        element: this._root,\r\n        object: this._matches[this._index],\r\n      });\r\n\r\n      if (this._root.value.length > 0) {\r\n        this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get text from li on enter or click\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _getTextFromLi = (element) => {\r\n    if (!element || this._matches.length === 0) {\r\n      // set default settings\r\n      !this._disable && this._reset();\r\n\r\n      return;\r\n    }\r\n\r\n    // show clearBtn when select element\r\n    this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n\r\n    // get first element from li and set it to root\r\n    this._root.value = getFirstElement(element);\r\n\r\n    // onSubmit passing text to function\r\n    this._onSubmit({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      results: this._resultList,\r\n    });\r\n\r\n    // set default settings\r\n    if (!this._disable) {\r\n      if (!this._preventScrollUp) {\r\n        this._removeAria(element);\r\n      }\r\n      this._reset();\r\n    }\r\n\r\n    // remove cache\r\n    this._cacheAct(\"remove\");\r\n  };\r\n\r\n  /**\r\n   * Return which li element was selected\r\n   * by hovering the mouse over\r\n   *\r\n   * @param {HTMLElement} target\r\n   * @returns {Number}\r\n   */\r\n  _indexLiSelected = (target) =>\r\n    // get index of li element\r\n    Array.prototype.indexOf.call(this._itemsLi, target);\r\n\r\n  /**\r\n   * Navigating the elements li and enter\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleKeys = (event) => {\r\n    const { keyCode } = event;\r\n\r\n    const resultList = classList(this._resultWrap, \"contains\", this._isActive);\r\n\r\n    const matchesLength = this._matches.length + 1;\r\n    this._selectedLi = select(`.${this._activeList}`);\r\n\r\n    // switch between keys\r\n    switch (keyCode) {\r\n      case keyCodes.UP:\r\n      case keyCodes.DOWN:\r\n        // Wrong cursor position in the input field #62\r\n        // Prevents the cursor from moving to the beginning\r\n        // of input as the cursor hovers over the results.\r\n        event.preventDefault();\r\n\r\n        if ((matchesLength <= 1 && this._selectFirst) || !resultList) {\r\n          return;\r\n        }\r\n\r\n        // if keyCode is up\r\n        if (keyCode === keyCodes.UP) {\r\n          if (this._index < 0) {\r\n            this._index = matchesLength - 1;\r\n          }\r\n          this._index -= 1;\r\n        } else {\r\n          this._index += 1;\r\n          if (this._index >= matchesLength) {\r\n            this._index = 0;\r\n          }\r\n        }\r\n\r\n        // remove aria-selected\r\n        this._removeAria(this._selectedLi);\r\n\r\n        if (this._index >= 0 && this._index < matchesLength - 1) {\r\n          const selectedElement = this._itemsLi[this._index];\r\n\r\n          if (this._toInput && resultList) {\r\n            this._root.value = getFirstElement(selectedElement);\r\n\r\n            this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n          }\r\n\r\n          // callback function\r\n          this._onSelected({\r\n            index: this._index,\r\n            element: this._root,\r\n            object: this._matches[this._index],\r\n          });\r\n\r\n          // set aria-selected\r\n          this._setAria(selectedElement);\r\n        } else {\r\n          // catch action\r\n          this._cacheAct();\r\n          setAriaActivedescendant(this._root);\r\n\r\n          this._onSelected({\r\n            index: null,\r\n            element: this._root,\r\n            object: null,\r\n          });\r\n        }\r\n\r\n        break;\r\n      // keycode enter\r\n      case keyCodes.ENTER:\r\n        // https:github.com/tomickigrzegorz/autocomplete/issues/145\r\n        event.preventDefault();\r\n\r\n        this._getTextFromLi(this._selectedLi);\r\n        break;\r\n\r\n      // keycode escape and keycode tab\r\n      case keyCodes.TAB:\r\n      case keyCodes.ESC:\r\n        event.stopPropagation();\r\n        if (!this._showAllValues) {\r\n          this._reset();\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria label on item li\r\n   *\r\n   * @param {HTMLElement} target\r\n   */\r\n  _setAria = (target) => {\r\n    const selectedOption = `${this._selectedOption}-${this._indexLiSelected(\r\n      target,\r\n    )}`;\r\n\r\n    // set aria to li\r\n    setAttributes(target, {\r\n      id: selectedOption,\r\n      \"aria-selected\": \"true\",\r\n      addClass: this._activeList,\r\n    });\r\n\r\n    setAriaActivedescendant(this._root, selectedOption);\r\n\r\n    // scrollIntoView when press up/down arrows\r\n    followActiveElement(\r\n      target,\r\n      this._outputUl,\r\n      this._classGroup,\r\n      this._resultList,\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove aria label from item li\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _removeAria = (element) => {\r\n    if (!element) return;\r\n\r\n    // remove aria from li\r\n    setAttributes(element, {\r\n      id: \"\",\r\n      removeClass: this._activeList,\r\n      \"aria-selected\": \"false\",\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Create clear button and\r\n   * removing text from the input field\r\n   */\r\n  _clearbutton = () => {\r\n    // stop when clear button is disabled\r\n    if (!this._clearButton) return;\r\n\r\n    // add aria to clear button\r\n    setAttributes(this._clearBtn, {\r\n      class: `${this._prefix}-clear hidden`,\r\n      title: this._clearBtnAriLabel,\r\n      \"aria-label\": this._clearBtnAriLabel,\r\n    });\r\n\r\n    // insert clear button after input - root\r\n    this._root.insertAdjacentElement(\"afterend\", this._clearBtn);\r\n  };\r\n\r\n  /**\r\n   * Rerender rows without remove root input and close elements\r\n   * @param {String} inputValue\r\n   */\r\n  rerender = (inputValue) => {\r\n    const text = inputValue?.trim() ? inputValue.trim() : this._root.value;\r\n    if (inputValue?.trim()) {\r\n      this._root.value = inputValue.trim();\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n    const regexText = text.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n    this._searchItem(regexText.trim());\r\n  };\r\n\r\n  /**\r\n   * Clicking on the clear button\r\n   * publick destroy method\r\n   */\r\n  destroy = () => {\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n    // clear value searchId\r\n    this._root.value = \"\";\r\n    // set focus\r\n    this._root.focus();\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n    // set default aria\r\n    this._reset();\r\n    // remove error if exist\r\n    this._error();\r\n    // callback function\r\n    this._onReset(this._root);\r\n    // remove animation on loading\r\n    this._onLoading();\r\n\r\n    // remove listener\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    // remove listener on click on document\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n  };\r\n}\r\n"],"names":["isObject","value","constructor","Object","isPromise","Boolean","then","setAttributes","el","object","key","classList","setAttribute","getFirstElement","element","firstElementChild","textContent","trim","scrollResultsToTop","resultList","resultWrap","scrollTop","offsetTop","offsetHeight","addAriaToAllLiElements","itemsLi","i","length","role","tabindex","showBtnToClearData","clearButton","destroy","onEvent","action","className","setAriaActivedescendant","root","type","getClassGroupHeight","outputUl","classGroup","allLiElements","document","querySelectorAll","height","slice","call","map","followActiveElement","target","previusElement","previousSibling","previusElementHeight","getAttribute","offsetBottom","scrollBottom","output","prefix","id","tabIndex","addClass","insertAdjacentElement","parentNode","insertBefore","nextSibling","createElement","select","querySelector","callback","addEventListener","offEvent","removeEventListener","ariaActiveDescendantDefault","removeClass","keyCodes","ESC","ENTER","UP","DOWN","TAB","Autocomplete","_ref","delay","clearButtonOnInitial","howManyCharacters","selectFirst","insertToInput","showValuesOnClick","showAllValues","cache","disableCloseOnSelect","preventScrollUp","removeResultsWhenInputIsEmpty","regex","expression","replacement","classPreventClosing","classPrefix","ariaLabelClear","onSearch","onResults","onSubmit","onOpened","onReset","onRender","onClose","noResults","onSelectedItem","_initial","_clearbutton","ariaAcrivedescentDefault","_outputUl","_root","_resultList","_resultWrap","_prefix","_handleInput","_showValuesOnClick","_showAllValues","config","_onRender","results","_clearButtonOnInitial","_clearBtn","_cacheAct","_cache","_cacheData","removeAttribute","_ref2","replace","_regex","_delay","clearTimeout","_timeout","setTimeout","_removeResultsWhenInputIsEmpty","_searchItem","_reset","_isActive","ariaAcrivedescent","_preventScrollUp","_removeAria","_activeList","_index","_selectFirst","_matches","_toInput","_onClose","_value","_onLoading","_clearButton","_characters","_onSearch","currentValue","result","rootValueLength","resultLength","Array","isArray","JSON","parse","stringify","_error","_noResults","template","_results","_events","catch","_isLoading","_err","_handleKeys","_handleShowItems","_handleDocClick","eventType","_handleMouse","dataResults","_onResults","matches","_classGroup","insertAdjacentHTML","checkIfClassGroupExist","_itemsLi","_onOpened","_selectFirstElement","_ref3","disableClose","closest","_disable","_prevClosing","_id","classSelectFirst","nextElementSibling","_onSelected","index","_selectedOption","event","preventDefault","targetClosest","targetClosestRole","hasAttribute","activeClass","activeClassElement","_getTextFromLi","_setAria","_indexLiSelected","_onSubmit","prototype","indexOf","keyCode","matchesLength","_selectedLi","selectedElement","stopPropagation","selectedOption","class","title","_clearBtnAriLabel","rerender","inputValue","text","regexText","focus","_onReset","getElementById","_ref4","Promise","resolve","_defaultExpression"],"mappings":"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"}