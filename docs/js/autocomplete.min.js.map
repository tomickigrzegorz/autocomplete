{"version":3,"file":"autocomplete.min.js","sources":["../../sources/js/utils/function.js","../../sources/js/utils/keyCodes.js","../../sources/js/script.js"],"sourcesContent":["/**\r\n * Check if a value is an object\r\n * @param {any} value\r\n * @returns {boolean}\r\n */\r\nexport const isObject = (value) =>\r\n  value && typeof value === \"object\" && value.constructor === Object;\r\n\r\n/**\r\n * Check if a value is a Promise\r\n * @param {any} value\r\n * @returns {boolean}\r\n */\r\nexport const isPromise = (value) =>\r\n  Boolean(value && typeof value.then === \"function\");\r\n\r\n/**\r\n * Set attributes to an element\r\n * @param {HTMLElement} el\r\n * @param {Object<string, string | number | boolean>} attributes\r\n */\r\nexport const setAttributes = (el, attributes) => {\r\n  Object.entries(attributes).forEach(([key, value]) => {\r\n    if (key === \"addClass\" || key === \"removeClass\") {\r\n      classList(el, key === \"addClass\" ? \"add\" : \"remove\", value);\r\n    } else {\r\n      el.setAttribute(key, value);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Get the trimmed text content of the first child element\r\n * @param {HTMLElement} element\r\n * @returns {string}\r\n */\r\nexport const getFirstElement = (element) =>\r\n  (element.firstElementChild || element).textContent.trim();\r\n\r\n/**\r\n * Scroll the result list to the top\r\n * @param {HTMLElement} resultList\r\n * @param {HTMLElement} resultWrap\r\n */\r\nexport const scrollResultsToTop = (resultList, resultWrap) => {\r\n  resultList.scrollTop = resultList.offsetTop - resultWrap.offsetHeight;\r\n};\r\n\r\n/**\r\n * Add ARIA attributes to all list items\r\n * @param {NodeListOf<HTMLElement>} itemsLi\r\n */\r\nexport const addAriaToAllLiElements = (itemsLi) => {\r\n  itemsLi.forEach((item, index) => {\r\n    setAttributes(item, {\r\n      role: \"option\",\r\n      tabindex: \"-1\",\r\n      \"aria-selected\": \"false\",\r\n      \"aria-setsize\": itemsLi.length,\r\n      \"aria-posinset\": index + 1,\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * Show the clear button and attach a destroy event\r\n * @param {HTMLElement} clearButton\r\n * @param {Function} destroy\r\n */\r\nexport const showBtnToClearData = (clearButton, destroy) => {\r\n  if (!clearButton) return;\r\n  classList(clearButton, \"remove\", \"hidden\");\r\n  onEvent(clearButton, \"click\", destroy);\r\n};\r\n\r\n/**\r\n * Manage class list actions\r\n * @param {HTMLElement} element\r\n * @param {\"add\" | \"remove\"} action\r\n * @param {string} className\r\n */\r\nexport const classList = (element, action, className) =>\r\n  element.classList[action](className);\r\n\r\n/**\r\n * Set the aria-activedescendant attribute\r\n * @param {HTMLElement} root\r\n * @param {string} type\r\n */\r\nexport const setAriaActivedescendant = (root, type) => {\r\n  setAttributes(root, { \"aria-activedescendant\": type || \"\" });\r\n};\r\n\r\n/**\r\n * Get the height of list items excluding a specific group class\r\n * @param {string} outputUl\r\n * @param {string} classGroup\r\n * @returns {number}\r\n */\r\nexport const getClassGroupHeight = (outputUl, classGroup) => {\r\n  const allLiElements = document.querySelectorAll(\r\n    `#${outputUl} > li:not(.${classGroup})`,\r\n  );\r\n  return Array.from(allLiElements).reduce(\r\n    (height, el) => height + el.offsetHeight,\r\n    0,\r\n  );\r\n};\r\n\r\n/**\r\n * Scroll the active element into view\r\n * @param {HTMLElement} target\r\n * @param {string} outputUl\r\n * @param {string} classGroup\r\n * @param {HTMLElement} resultList\r\n */\r\nexport const followActiveElement = (\r\n  target,\r\n  outputUl,\r\n  classGroup,\r\n  resultList,\r\n) => {\r\n  const previousElement = resultList.previousSibling;\r\n  const previousElementHeight = previousElement\r\n    ? previousElement.offsetHeight\r\n    : 0;\r\n\r\n  if (target.getAttribute(\"aria-posinset\") === \"0\") {\r\n    resultList.scrollTop =\r\n      target.offsetTop - getClassGroupHeight(outputUl, classGroup);\r\n  }\r\n\r\n  if (target.offsetTop - previousElementHeight < resultList.scrollTop) {\r\n    resultList.scrollTop = target.offsetTop - previousElementHeight;\r\n  } else {\r\n    const offsetBottom =\r\n      target.offsetTop + target.offsetHeight - previousElementHeight;\r\n    const scrollBottom = resultList.scrollTop + resultList.offsetHeight;\r\n    if (offsetBottom > scrollBottom) {\r\n      resultList.scrollTop = offsetBottom - resultList.offsetHeight;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Create and configure the output list\r\n * @param {HTMLElement} root\r\n * @param {HTMLElement} resultList\r\n * @param {string} outputUl\r\n * @param {HTMLElement} resultWrap\r\n * @param {string} prefix\r\n */\r\nexport const output = (root, resultList, outputUl, resultWrap, prefix) => {\r\n  setAttributes(resultList, { id: outputUl, role: \"listbox\" });\r\n  setAttributes(resultWrap, { addClass: `${prefix}-results-wrapper` });\r\n  resultWrap.insertAdjacentElement(\"beforeend\", resultList);\r\n  root.parentNode.insertBefore(resultWrap, root.nextSibling);\r\n};\r\n\r\n/**\r\n * Create an HTML element\r\n * @param {string} type\r\n * @returns {HTMLElement}\r\n */\r\nexport const createElement = (type) => document.createElement(type);\r\n\r\n/**\r\n * Select an element by its selector\r\n * @param {string} selector\r\n * @returns {HTMLElement | null}\r\n */\r\nexport const select = (selector) => document.querySelector(selector);\r\n\r\n/**\r\n * Attach an event listener to an element\r\n * @param {HTMLElement} element\r\n * @param {string} action\r\n * @param {Function} callback\r\n */\r\nexport const onEvent = (element, action, callback) => {\r\n  element.addEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Remove an event listener from an element\r\n * @param {HTMLElement} element\r\n * @param {string} action\r\n * @param {Function} callback\r\n */\r\nexport const offEvent = (element, action, callback) => {\r\n  element.removeEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Default ARIA attributes for active descendant\r\n * @param {string} id\r\n * @param {boolean} insertToInput - Whether text is inserted into input\r\n * @returns {Object<string, string>}\r\n */\r\nexport const ariaActiveDescendantDefault = (id, insertToInput = false) => ({\r\n  \"aria-owns\": id,\r\n  \"aria-expanded\": \"false\",\r\n  \"aria-autocomplete\": insertToInput ? \"both\" : \"list\",\r\n  role: \"combobox\",\r\n  removeClass: \"auto-expanded\",\r\n});\r\n","/**\r\n * Key codes\r\n * @typedef {Object} KeyCodes\r\n * @property {number} ESC - Escape key code.\r\n * @property {number} ENTER - Enter key code.\r\n * @property {number} UP - Up arrow key code.\r\n * @property {number} DOWN - Down arrow key code.\r\n * @property {number} TAB - Tab key code.\r\n */\r\n\r\n/** @type {KeyCodes} */\r\nconst KEY_CODES = Object.freeze({\r\n  ESC: 27,\r\n  ENTER: 13,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  TAB: 9,\r\n});\r\n\r\nexport default KEY_CODES;\r\n","import {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n  ariaActiveDescendantDefault,\r\n} from \"./utils/function\";\r\n\r\nimport KEY_CODES from \"./utils/keyCodes\";\r\n\r\n/**\r\n * @typedef {Object} RegexConfig\r\n * @property {RegExp} expression - Regular expression for matching.\r\n * @property {string} replacement - Replacement string for matches.\r\n */\r\n\r\n/**\r\n * @typedef {Object} AutocompleteOptions\r\n * @property {number} [delay=500] - Delay in milliseconds before searching.\r\n * @property {boolean} [clearButton=true] - Whether to show a clear button.\r\n * @property {boolean} [clearButtonOnInitial=false] - Show clear button initially.\r\n * @property {number} [howManyCharacters=1] - Minimum characters to trigger search.\r\n * @property {boolean} [selectFirst=false] - Automatically select the first result.\r\n * @property {boolean} [insertToInput=false] - Insert selected value into input.\r\n * @property {boolean} [showValuesOnClick=false] - Show all values on input click.\r\n * @property {boolean} [inline=false] - Inline mode for autocomplete.\r\n * @property {boolean} [cache=false] - Enable caching of results.\r\n * @property {boolean} [disableCloseOnSelect=false] - Prevent closing on selection.\r\n * @property {boolean} [preventScrollUp=false] - Prevent scrolling to the top.\r\n * @property {boolean} [removeResultsWhenInputIsEmpty=false] - Remove results when input is empty.\r\n * @property {RegexConfig} [regex] - Configuration for regex matching.\r\n * @property {string} [classGroup] - CSS class for grouping results.\r\n * @property {string} [classPreventClosing] - CSS class to prevent closing.\r\n * @property {string} [classPrefix] - Prefix for CSS classes.\r\n * @property {string} [ariaLabelClear] - ARIA label for the clear button.\r\n * @property {Function} onSearch - Callback for search.\r\n * @property {Function} [onResults] - Callback for rendering results.\r\n * @property {Function} [onSubmit] - Callback for submitting a result.\r\n * @property {Function} [onOpened] - Callback when results are opened.\r\n * @property {Function} [onReset] - Callback when reset is triggered.\r\n * @property {Function} [onRender] - Callback for rendering the component.\r\n * @property {Function} [onClose] - Callback when results are closed.\r\n * @property {Function} [noResults] - Callback when no results are found.\r\n * @property {Function} [onSelectedItem] - Callback when an item is selected.\r\n */\r\n\r\n/**\r\n * @class Autocomplete\r\n */\r\nexport default class Autocomplete {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {string} element - ID of the root element.\r\n   * @param {AutocompleteOptions} object - Configuration options.\r\n   */\r\n  constructor(\r\n    element,\r\n    {\r\n      delay = 500,\r\n      clearButton = true,\r\n      clearButtonOnInitial = false,\r\n      howManyCharacters = 1,\r\n      selectFirst = false,\r\n      insertToInput = false,\r\n      showValuesOnClick = false,\r\n      inline = false,\r\n      cache = false,\r\n      disableCloseOnSelect = false,\r\n      preventScrollUp = false,\r\n      removeResultsWhenInputIsEmpty = false,\r\n      regex = { expression: /[|\\\\{}()[\\]^$+*?]/g, replacement: \"\\\\$&\" },\r\n      classGroup,\r\n      classPreventClosing,\r\n      classPrefix,\r\n      ariaLabelClear,\r\n      onSearch,\r\n      onResults = () => {},\r\n      onSubmit = () => {},\r\n      onOpened = () => {},\r\n      onReset = () => {},\r\n      onRender = () => {},\r\n      onClose = () => {},\r\n      noResults = () => {},\r\n      onSelectedItem = () => {},\r\n    },\r\n  ) {\r\n    /** @type {string} */\r\n    this._id = element;\r\n    /** @type {HTMLElement} */\r\n    this._root = document.getElementById(element);\r\n\r\n    if (!this._root) {\r\n      throw new Error(`Autocomplete: Element with id \"${element}\" not found`);\r\n    }\r\n\r\n    /** @type {Function} */\r\n    this._onSearch = isPromise(onSearch)\r\n      ? onSearch\r\n      : ({ currentValue, element }) =>\r\n          Promise.resolve(onSearch({ currentValue, element }));\r\n    /** @type {Function} */\r\n    this._onResults = onResults;\r\n    /** @type {Function} */\r\n    this._onRender = onRender;\r\n    /** @type {Function} */\r\n    this._onSubmit = onSubmit;\r\n    /** @type {Function} */\r\n    this._onSelected = onSelectedItem;\r\n    /** @type {Function} */\r\n    this._onOpened = onOpened;\r\n    /** @type {Function} */\r\n    this._onReset = onReset;\r\n    /** @type {Function} */\r\n    this._noResults = noResults;\r\n    /** @type {Function} */\r\n    this._onClose = onClose;\r\n    /** @type {number} */\r\n    this._delay = delay;\r\n    /** @type {number} */\r\n    this._characters = howManyCharacters;\r\n    /** @type {boolean} */\r\n    this._clearButton = clearButton;\r\n    /** @type {boolean} */\r\n    this._clearButtonOnInitial = clearButtonOnInitial;\r\n    /** @type {boolean} */\r\n    this._selectFirst = selectFirst;\r\n    /** @type {boolean} */\r\n    this._toInput = insertToInput;\r\n    /** @type {boolean} */\r\n    this._showValuesOnClick = showValuesOnClick;\r\n    /** @type {boolean} */\r\n    this._inline = inline;\r\n    /** @type {string|undefined} */\r\n    this._classGroup = classGroup;\r\n    /** @type {string|undefined} */\r\n    this._prevClosing = classPreventClosing;\r\n    /** @type {string} */\r\n    this._clearBtnAriLabel = ariaLabelClear\r\n      ? ariaLabelClear\r\n      : \"clear the search query\";\r\n    /** @type {string} */\r\n    this._prefix = classPrefix ? `${classPrefix}-auto` : \"auto\";\r\n    /** @type {boolean} */\r\n    this._disable = disableCloseOnSelect;\r\n    /** @type {boolean} */\r\n    this._preventScrollUp = preventScrollUp;\r\n    /** @type {boolean} */\r\n    this._removeResultsWhenInputIsEmpty = removeResultsWhenInputIsEmpty;\r\n\r\n    // default config\r\n    /** @type {boolean} */\r\n    this._cache = cache;\r\n    /** @type {number|null} */\r\n    this._timeout = null;\r\n    /** @type {string} */\r\n    this._outputUl = `${this._prefix}-${this._id}-results`;\r\n    /** @type {string} */\r\n    this._cacheData = `data-cache-auto-${this._id}`;\r\n    /** @type {string} */\r\n    this._isLoading = `${this._prefix}-is-loading`;\r\n    /** @type {string} */\r\n    this._isActive = `${this._prefix}-is-active`;\r\n    /** @type {string} */\r\n    this._activeList = `${this._prefix}-selected`;\r\n    /** @type {string} */\r\n    this._selectedOption = `${this._prefix}-selected-option`;\r\n    /** @type {string} */\r\n    this._err = `${this._prefix}-error`;\r\n    /** @type {HTMLElement} */\r\n    this._resultWrap = createElement(\"div\");\r\n    /** @type {HTMLElement} */\r\n    this._resultList = createElement(\"ul\");\r\n    /** @type {HTMLElement} */\r\n    this._clearBtn = createElement(\"button\");\r\n\r\n    // ----------------------------------------\r\n    // regex - merge with defaults\r\n\r\n    const defaultRegex = {\r\n      expression: /[|\\\\{}()[\\]^$+*?]/g,\r\n      replacement: \"\\\\$&\",\r\n    };\r\n    /** @type {RegexConfig} */\r\n    this._regex = {\r\n      expression: regex.expression || defaultRegex.expression,\r\n      replacement: regex.replacement ?? defaultRegex.replacement,\r\n    };\r\n\r\n    // ----------------------------------------\r\n\r\n    this._initial();\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  _initial = () => {\r\n    this._clearbutton();\r\n\r\n    const ariaAcrivedescentDefault = ariaActiveDescendantDefault(\r\n      this._outputUl,\r\n      this._toInput,\r\n    );\r\n    setAttributes(this._root, ariaAcrivedescentDefault);\r\n\r\n    output(\r\n      this._root,\r\n      this._resultList,\r\n      this._outputUl,\r\n      this._resultWrap,\r\n      this._prefix,\r\n    );\r\n\r\n    // ensure results list has the expected id immediately and connect it to the input\r\n    // the list may be empty initially but having aria-controls present improves accessibility\r\n    try {\r\n      this._resultList.id = this._outputUl;\r\n      this._root.setAttribute(\"aria-controls\", this._outputUl);\r\n    } catch (e) {\r\n      // silent fallback\r\n    }\r\n\r\n    // default aria\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n\r\n    // show all values on click root input\r\n    this._showValuesOnClick && onEvent(this._root, \"click\", this._handleInput);\r\n\r\n    // show all values\r\n    if (this._inline) {\r\n      const config = { root: this._root, type: \"load\" };\r\n      onEvent(this._root, \"load\", this._handleInput(config));\r\n    }\r\n\r\n    // callback functions\r\n    this._onRender({\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // show clear button if\r\n    if (this._clearButtonOnInitial) {\r\n      showBtnToClearData(this._clearBtn, this.destroy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Actions on input\r\n   *\r\n   * @param {String} type - set attribute depending on type\r\n   * @param {String} target\r\n   */\r\n  _cacheAct = (type, target) => {\r\n    if (!this._cache) return;\r\n\r\n    if (type === \"update\") {\r\n      this._root.setAttribute(this._cacheData, target?.value);\r\n    } else if (type === \"remove\") {\r\n      this._root.removeAttribute(this._cacheData);\r\n    } else {\r\n      this._root.value = this._root.getAttribute(this._cacheData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleInput = ({ target, type }) => {\r\n    if (\r\n      this._root.getAttribute(\"aria-expanded\") === \"true\" &&\r\n      type === \"click\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // if inline is true then set root to target\r\n    target = this._inline ? this._root : target;\r\n    // replace all special characters\r\n    const regex = target?.value.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n\r\n    // update data attribute cache\r\n    this._cacheAct(\"update\", target);\r\n\r\n    const delay =\r\n      this._showValuesOnClick || (this._inline && type === \"load\")\r\n        ? 0\r\n        : this._delay;\r\n\r\n    clearTimeout(this._timeout);\r\n    this._timeout = setTimeout(() => {\r\n      // removeResultsWhenInputIsEmpty\r\n      // remove results when input is empty\r\n      if (this._removeResultsWhenInputIsEmpty) {\r\n        if (target?.value.length === 0) {\r\n          this.destroy();\r\n          return;\r\n        }\r\n      }\r\n\r\n      this._searchItem(regex?.trim());\r\n    }, delay);\r\n  };\r\n\r\n  /**\r\n   * Default aria\r\n   */\r\n  _reset = () => {\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    const ariaAcrivedescentDefault = ariaActiveDescendantDefault(\r\n      this._outputUl,\r\n      this._toInput,\r\n    );\r\n\r\n    const ariaAcrivedescent = this._preventScrollUp\r\n      ? ariaAcrivedescentDefault\r\n      : { ...ariaAcrivedescentDefault, \"aria-activedescendant\": \"\" };\r\n\r\n    // set attributes to root - input\r\n    setAttributes(this._root, ariaAcrivedescent);\r\n\r\n    if (!this._preventScrollUp) {\r\n      // set default aria-selected, remove id and remove class 'auto-selected'\r\n      this._removeAria(select(`.${this._activeList}`));\r\n\r\n      // set index\r\n      this._index = this._selectFirst ? 0 : -1;\r\n    }\r\n\r\n    // remove result when length = 0 and insertToInput is false\r\n    // https://github.com/tomickigrzegorz/autocomplete/issues/136\r\n    if (\r\n      (this._matches?.length === 0 && !this._toInput) ||\r\n      this._showValuesOnClick\r\n    ) {\r\n      this._resultList.textContent = \"\";\r\n    }\r\n\r\n    // callback function\r\n    this._onClose();\r\n  };\r\n\r\n  /**\r\n   * The async function gets the text from the search\r\n   * and returns the matching array\r\n   *\r\n   * @param {String} value\r\n   */\r\n  _searchItem = (value) => {\r\n    this._value = value;\r\n\r\n    // if searching show loading icon\r\n    this._onLoading(true);\r\n\r\n    // hide button clear\r\n    showBtnToClearData(this._clearBtn, this.destroy);\r\n\r\n    // if there is no value and clearButton is true\r\n    if (\r\n      (!value || value?.length === 0) &&\r\n      this._clearButton &&\r\n      !this._clearButtonOnInitial\r\n    ) {\r\n      classList(this._clearBtn, \"add\", \"hidden\");\r\n    }\r\n\r\n    // if declare characters more then value.len and showAll is false\r\n    // remove class isActive\r\n    if (\r\n      this._characters > value?.length &&\r\n      !this._showValuesOnClick &&\r\n      !this._inline\r\n    ) {\r\n      this._onLoading();\r\n      return;\r\n    }\r\n\r\n    // callblack function onSearch\r\n    this._onSearch({ currentValue: value, element: this._root })\r\n      .then((result) => {\r\n        const rootValueLength = this._root.value.length;\r\n        const resultLength = result.length;\r\n        // set no result\r\n        this._matches = Array.isArray(result)\r\n          ? result\r\n          : JSON.parse(JSON.stringify(result));\r\n\r\n        this._onLoading();\r\n        this._error();\r\n\r\n        // if use destroy() method\r\n        if (resultLength === 0 && rootValueLength === 0) {\r\n          classList(this._clearBtn, \"add\", \"hidden\");\r\n        }\r\n\r\n        if (resultLength === 0 && rootValueLength) {\r\n          classList(this._root, \"remove\", \"auto-expanded\");\r\n          this._reset();\r\n          this._noResults({\r\n            element: this._root,\r\n            currentValue: value,\r\n            template: this._results,\r\n          });\r\n          this._events();\r\n        } else if (resultLength > 0 || isObject(result)) {\r\n          this._index = this._selectFirst ? 0 : -1;\r\n          this._results();\r\n          this._events();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this._onLoading();\r\n        this._reset();\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Set or remove loading class\r\n   *\r\n   * @param {Boolean} type\r\n   */\r\n  _onLoading = (type) =>\r\n    this._root.parentNode.classList[type ? \"add\" : \"remove\"](this._isLoading);\r\n\r\n  /**\r\n   * Set error class to the root element\r\n   */\r\n  _error = () => classList(this._root, \"remove\", this._err);\r\n\r\n  /**\r\n   * Events - binds event listeners (removes existing ones first to prevent leaks)\r\n   */\r\n  _events = () => {\r\n    // Remove existing listeners to prevent duplicates\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n    [\"mousemove\", \"click\"].forEach((eventType) => {\r\n      offEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n\r\n    // handle click on keydown [up, down, enter, tab, esc]\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n\r\n    // close expanded items\r\n    if (!this._inline) {\r\n      onEvent(document, \"click\", this._handleDocClick);\r\n    }\r\n\r\n    // mouse events on result list\r\n    [\"mousemove\", \"click\"].forEach((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Results\r\n   *\r\n   * @param {HTMLElement|String} template - html or string returned from the function,\r\n   * look at the example - https://github.com/tomickigrzegorz/autocomplete/blob/master/docs/js/examples/no-results.js#L30\r\n   */\r\n  _results = (template) => {\r\n    // set attribute to root\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"true\",\r\n      addClass: `${this._prefix}-expanded`,\r\n    });\r\n\r\n    // clear result list\r\n    this._resultList.textContent = \"\";\r\n\r\n    // add all found records to otput ul\r\n    const dataResults =\r\n      this._matches.length === 0\r\n        ? this._onResults({\r\n            currentValue: this._value,\r\n            matches: 0,\r\n            template,\r\n          })\r\n        : this._onResults({\r\n            currentValue: this._value,\r\n            matches: this._matches,\r\n            classGroup: this._classGroup,\r\n          });\r\n\r\n    this._resultList.insertAdjacentHTML(\"afterbegin\", dataResults);\r\n\r\n    // add class isActive\r\n    classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n    const checkIfClassGroupExist = this._classGroup\r\n      ? `:not(.${this._classGroup})`\r\n      : \"\";\r\n\r\n    this._itemsLi = document.querySelectorAll(\r\n      `#${this._outputUl} > li${checkIfClassGroupExist}`,\r\n    );\r\n\r\n    // adding role, tabindex and aria\r\n    addAriaToAllLiElements(this._itemsLi);\r\n\r\n    // action on open results\r\n    this._onOpened({\r\n      type: \"results\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // select first element\r\n    this._selectFirstElement();\r\n\r\n    scrollResultsToTop(this._resultList, this._resultWrap);\r\n  };\r\n\r\n  /**\r\n   * Handle click on document\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleDocClick = ({ target }) => {\r\n    let disableClose = null;\r\n\r\n    // if 'target' is a ul and 'disableCloseOnSelect'\r\n    // is a 'true' set 'disableClose' on true\r\n    if (\r\n      (target.closest(\"ul\") && this._disable) ||\r\n      // when class classDisableClose\r\n      // then do not not close results\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      disableClose = true;\r\n    }\r\n\r\n    if (target.id !== this._id && !disableClose) {\r\n      this._reset();\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select first element\r\n   */\r\n  _selectFirstElement = () => {\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    if (!this._selectFirst) {\r\n      return;\r\n    }\r\n\r\n    const { firstElementChild } = this._resultList;\r\n\r\n    const classSelectFirst =\r\n      this._classGroup && this._matches.length > 0 && this._selectFirst\r\n        ? firstElementChild.nextElementSibling\r\n        : firstElementChild;\r\n\r\n    // callback function onSelect when first element is true\r\n    this._onSelected({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      currentValue: this._root.value,\r\n    });\r\n\r\n    // set attribute to first element\r\n    setAttributes(classSelectFirst, {\r\n      id: `${this._selectedOption}-0`,\r\n      addClass: this._activeList,\r\n      \"aria-selected\": \"true\",\r\n    });\r\n\r\n    // set aria active descendant\r\n    setAriaActivedescendant(this._root, `${this._selectedOption}-0`);\r\n  };\r\n\r\n  /**\r\n   * show items when items.length > 0 and is not empty\r\n   */\r\n  _handleShowItems = () => {\r\n    // if resultWrap is not active and resultList is not empty\r\n    if (\r\n      this._resultList.textContent.length > 0 &&\r\n      !classList(this._resultWrap, \"contains\", this._isActive)\r\n    ) {\r\n      // set attribute to root\r\n      setAttributes(this._root, {\r\n        \"aria-expanded\": \"true\",\r\n        addClass: `${this._prefix}-expanded`,\r\n      });\r\n\r\n      // add isActive class to resultWrap\r\n      classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n      if (!this._preventScrollUp) {\r\n        scrollResultsToTop(this._resultList, this._resultWrap);\r\n        // select first element\r\n        this._selectFirstElement();\r\n      }\r\n\r\n      // callback function\r\n      this._onOpened({\r\n        type: \"showItems\",\r\n        element: this._root,\r\n        results: this._resultList,\r\n      });\r\n\r\n      if (!this._cache) return;\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adding text from the list when li is clicking\r\n   * or adding aria-selected to li elements\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleMouse = (event) => {\r\n    event.preventDefault();\r\n\r\n    const { target, type } = event;\r\n    const targetClosest = target.closest(\"li\");\r\n    const targetClosestRole = targetClosest?.hasAttribute(\"role\");\r\n    const activeClass = this._activeList;\r\n    const activeClassElement = select(`.${activeClass}`);\r\n\r\n    if (\r\n      !targetClosest ||\r\n      !targetClosestRole ||\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (type === \"click\") {\r\n      // click on li get element\r\n      // get text from clicked li\r\n      this._getTextFromLi(targetClosest);\r\n    }\r\n\r\n    if (\r\n      type === \"mousemove\" &&\r\n      !classList(targetClosest, \"contains\", activeClass)\r\n    ) {\r\n      this._removeAria(activeClassElement);\r\n\r\n      // add aria to li\r\n      this._setAria(targetClosest);\r\n      this._index = this._indexLiSelected(targetClosest);\r\n\r\n      // Insert text to input on mouse hover if insertToInput is true\r\n      if (this._toInput) {\r\n        this._root.value = getFirstElement(targetClosest);\r\n      }\r\n\r\n      this._onSelected({\r\n        index: this._index,\r\n        element: this._root,\r\n        object: this._matches[this._index],\r\n      });\r\n\r\n      if (this._root.value.length > 0) {\r\n        this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get text from li on enter or click\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _getTextFromLi = (element) => {\r\n    if (!element || this._matches.length === 0) {\r\n      // set default settings\r\n      !this._disable && this._reset();\r\n\r\n      return;\r\n    }\r\n\r\n    // show clearBtn when select element\r\n    this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n\r\n    // get first element from li and set it to root\r\n    this._root.value = getFirstElement(element);\r\n\r\n    // onSubmit passing text to function\r\n    this._onSubmit({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      results: this._resultList,\r\n    });\r\n\r\n    // set default settings\r\n    if (!this._disable) {\r\n      if (!this._preventScrollUp) {\r\n        this._removeAria(element);\r\n      }\r\n      this._reset();\r\n    }\r\n\r\n    // remove cache\r\n    this._cacheAct(\"remove\");\r\n  };\r\n\r\n  /**\r\n   * Return which li element was selected\r\n   * by hovering the mouse over\r\n   *\r\n   * @param {HTMLElement} target\r\n   * @returns {Number}\r\n   */\r\n  _indexLiSelected = (target) =>\r\n    // get index of li element\r\n    Array.prototype.indexOf.call(this._itemsLi, target);\r\n\r\n  /**\r\n   * Navigating the elements li and enter\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleKeys = (event) => {\r\n    const { keyCode } = event;\r\n\r\n    const resultList = classList(this._resultWrap, \"contains\", this._isActive);\r\n\r\n    const matchesLength = this._matches.length + 1;\r\n    this._selectedLi = select(`.${this._activeList}`);\r\n\r\n    // switch between keys\r\n    switch (keyCode) {\r\n      case KEY_CODES.UP:\r\n      case KEY_CODES.DOWN:\r\n        // Wrong cursor position in the input field #62\r\n        // Prevents the cursor from moving to the beginning\r\n        // of input as the cursor hovers over the results.\r\n        event.preventDefault();\r\n\r\n        if ((matchesLength <= 1 && this._selectFirst) || !resultList) {\r\n          return;\r\n        }\r\n\r\n        // if keyCode is up\r\n        if (keyCode === KEY_CODES.UP) {\r\n          if (this._index < 0) {\r\n            this._index = matchesLength - 1;\r\n          }\r\n          this._index -= 1;\r\n        } else {\r\n          this._index += 1;\r\n          if (this._index >= matchesLength) {\r\n            this._index = 0;\r\n          }\r\n        }\r\n\r\n        // remove aria-selected\r\n        this._removeAria(this._selectedLi);\r\n\r\n        if (this._index >= 0 && this._index < matchesLength - 1) {\r\n          const selectedElement = this._itemsLi[this._index];\r\n\r\n          if (this._toInput && resultList) {\r\n            this._root.value = getFirstElement(selectedElement);\r\n\r\n            this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n          }\r\n\r\n          // callback function\r\n          this._onSelected({\r\n            index: this._index,\r\n            element: this._root,\r\n            object: this._matches[this._index],\r\n          });\r\n\r\n          // set aria-selected\r\n          this._setAria(selectedElement);\r\n        } else {\r\n          // catch action\r\n          this._cacheAct();\r\n          setAriaActivedescendant(this._root);\r\n\r\n          this._onSelected({\r\n            index: null,\r\n            element: this._root,\r\n            object: null,\r\n          });\r\n        }\r\n\r\n        break;\r\n      // keycode enter\r\n      case KEY_CODES.ENTER:\r\n        // https:github.com/tomickigrzegorz/autocomplete/issues/145\r\n        event.preventDefault();\r\n\r\n        this._getTextFromLi(this._selectedLi);\r\n        break;\r\n\r\n      // keycode escape and keycode tab\r\n      case KEY_CODES.TAB:\r\n      case KEY_CODES.ESC:\r\n        event.stopPropagation();\r\n        if (!this._inline) {\r\n          this._reset();\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria label on item li\r\n   *\r\n   * @param {HTMLElement} target\r\n   */\r\n  _setAria = (target) => {\r\n    const selectedOption = `${this._selectedOption}-${this._indexLiSelected(\r\n      target,\r\n    )}`;\r\n\r\n    // set aria to li\r\n    setAttributes(target, {\r\n      id: selectedOption,\r\n      \"aria-selected\": \"true\",\r\n      addClass: this._activeList,\r\n    });\r\n\r\n    setAriaActivedescendant(this._root, selectedOption);\r\n\r\n    // scrollIntoView when press up/down arrows\r\n    followActiveElement(\r\n      target,\r\n      this._outputUl,\r\n      this._classGroup,\r\n      this._resultList,\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove aria label from item li\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _removeAria = (element) => {\r\n    if (!element) return;\r\n\r\n    // remove aria from li\r\n    setAttributes(element, {\r\n      id: \"\",\r\n      removeClass: this._activeList,\r\n      \"aria-selected\": \"false\",\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Create clear button and\r\n   * removing text from the input field\r\n   */\r\n  _clearbutton = () => {\r\n    if (!this._clearButton) return;\r\n    setAttributes(this._clearBtn, {\r\n      type: \"button\",\r\n      class: `${this._prefix}-clear hidden`,\r\n      title: this._clearBtnAriLabel,\r\n      \"aria-label\": this._clearBtnAriLabel,\r\n    });\r\n    this._root.insertAdjacentElement(\"afterend\", this._clearBtn);\r\n  };\r\n\r\n  /**\r\n   * Rerender rows without remove root input and close elements\r\n   * @param {String} inputValue\r\n   */\r\n  rerender = (inputValue) => {\r\n    const text = inputValue?.trim() ? inputValue.trim() : this._root.value;\r\n    if (inputValue?.trim()) {\r\n      this._root.value = inputValue.trim();\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n    const regexText = text.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n    this._searchItem(regexText.trim());\r\n  };\r\n\r\n  /**\r\n   * Disable autocomplete functionality\r\n   * Use this when you want to disable autocomplete but keep the selected value\r\n   * @param {boolean} clearInput - If true, clears the input value, if false keeps it\r\n   */\r\n  disable = (clearInput = false) => {\r\n    // mark as disabled\r\n    this._root.setAttribute(\"data-auto-disabled\", \"true\");\r\n\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n\r\n    // clear value searchId only if clearInput is true\r\n    if (clearInput) {\r\n      this._root.value = \"\";\r\n      this._root.focus();\r\n    }\r\n\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    // reset aria attributes and add accessibility information for disabled state\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"false\",\r\n      removeClass: `${this._prefix}-expanded`,\r\n      \"aria-activedescendant\": \"\",\r\n    });\r\n\r\n    // remove all event listeners\r\n    offEvent(this._root, \"input\", this._handleInput);\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    if (this._showValuesOnClick) {\r\n      offEvent(this._root, \"click\", this._handleInput);\r\n    }\r\n\r\n    // remove document click listener\r\n    if (!this._inline) {\r\n      offEvent(document, \"click\", this._handleDocClick);\r\n    }\r\n\r\n    // remove mouse events from result list\r\n    [\"mousemove\", \"click\"].forEach((eventType) => {\r\n      offEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n\r\n    // remove loading animation\r\n    this._onLoading(false);\r\n\r\n    // remove error classes\r\n    this._error();\r\n\r\n    // callback function (without clearing input)\r\n    this._onClose();\r\n\r\n    setTimeout(() => {\r\n      // set aria-autocomplete to none after a brief delay to ensure screen readers update correctly\r\n      this._root.setAttribute(\"aria-autocomplete\", \"none\");\r\n    }, 0);\r\n  };\r\n\r\n  /**\r\n   * Enable autocomplete functionality\r\n   * Restores all functionality after disable() was called\r\n   */\r\n  enable = () => {\r\n    this._root.removeAttribute(\"data-auto-disabled\");\r\n    // Restore normal ARIA attributes based on insertToInput setting\r\n    const ariaAttributes = ariaActiveDescendantDefault(\r\n      this._outputUl,\r\n      this._toInput,\r\n    );\r\n    setAttributes(this._root, ariaAttributes);\r\n\r\n    // Re-enable all event listeners\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n    if (this._showValuesOnClick) {\r\n      onEvent(this._root, \"click\", this._handleInput);\r\n    }\r\n    if (!this._inline) {\r\n      onEvent(document, \"click\", this._handleDocClick);\r\n    }\r\n\r\n    // Re-enable mouse events on result list\r\n    [\"mousemove\", \"click\"].forEach((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n\r\n    // Show clear button if input has value and clearButton is enabled\r\n    if (this._clearButton && this._root.value.length > 0) {\r\n      classList(this._clearBtn, \"remove\", \"hidden\");\r\n    }\r\n\r\n    // Callback function\r\n    this._onOpened({\r\n      type: \"enable\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Clicking on the clear button\r\n   * publick destroy method\r\n   */\r\n  destroy = () => {\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n    // clear value searchId\r\n    this._root.value = \"\";\r\n    // set focus\r\n    this._root.focus();\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n    // if inline: true don't reset\r\n    if (!this._inline) this._reset();\r\n    // if inline: true keep onClose method\r\n    if (this._inline) this._onClose();\r\n    // remove error if exist\r\n    this._error();\r\n    // callback function\r\n    this._onReset(this._root);\r\n    // remove animation on loading\r\n    this._onLoading();\r\n\r\n    // remove listener\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    // remove listener on click on document\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n  };\r\n}\r\n"],"names":["setAttributes","el","attributes","Object","entries","forEach","_ref","key","value","classList","setAttribute","getFirstElement","element","firstElementChild","textContent","trim","scrollResultsToTop","resultList","resultWrap","scrollTop","offsetTop","offsetHeight","showBtnToClearData","clearButton","destroy","onEvent","action","className","setAriaActivedescendant","root","type","followActiveElement","target","outputUl","classGroup","previousElement","previousSibling","previousElementHeight","getAttribute","allLiElements","document","querySelectorAll","Array","from","reduce","height","getClassGroupHeight","offsetBottom","createElement","select","selector","querySelector","callback","addEventListener","offEvent","removeEventListener","ariaActiveDescendantDefault","id","insertToInput","role","removeClass","KEY_CODES","freeze","ESC","ENTER","UP","DOWN","TAB","_regex$replacement","_this","this","_ref$delay","delay","_ref$clearButton","_ref$clearButtonOnIni","clearButtonOnInitial","_ref$howManyCharacter","howManyCharacters","_ref$selectFirst","selectFirst","_ref$insertToInput","_ref$showValuesOnClic","showValuesOnClick","_ref$inline","inline","_ref$cache","cache","_ref$disableCloseOnSe","disableCloseOnSelect","_ref$preventScrollUp","preventScrollUp","_ref$removeResultsWhe","removeResultsWhenInputIsEmpty","_ref$regex","regex","expression","replacement","classPreventClosing","classPrefix","ariaLabelClear","onSearch","_ref$onResults","onResults","_ref$onSubmit","onSubmit","_ref$onOpened","onOpened","_ref$onReset","onReset","_ref$onRender","onRender","_ref$onClose","onClose","_ref$noResults","noResults","_ref$onSelectedItem","onSelectedItem","_initial","_clearbutton","prefix","ariaAcrivedescentDefault","_outputUl","_toInput","_root","_resultList","_resultWrap","_prefix","addClass","insertAdjacentElement","parentNode","insertBefore","nextSibling","e","_handleInput","_showValuesOnClick","_inline","config","_onRender","results","_clearButtonOnInitial","_clearBtn","_cacheAct","_cache","_cacheData","removeAttribute","_ref2","_target","replace","_regex","_delay","clearTimeout","_timeout","setTimeout","_target2","_removeResultsWhenInputIsEmpty","length","_searchItem","_reset","_this$_matches","_isActive","ariaAcrivedescent","_preventScrollUp","assign","_removeAria","_activeList","_index","_selectFirst","_matches","_onClose","_value","_onLoading","_clearButton","_characters","_onSearch","currentValue","then","result","rootValueLength","resultLength","isArray","JSON","parse","stringify","_error","_noResults","template","_results","_events","constructor","isObject","catch","_isLoading","_err","_handleKeys","_handleShowItems","_handleDocClick","eventType","_handleMouse","dataResults","_onResults","matches","_classGroup","insertAdjacentHTML","itemsLi","checkIfClassGroupExist","_itemsLi","item","index","tabindex","_onOpened","_selectFirstElement","_ref3","disableClose","closest","_disable","_prevClosing","_id","classSelectFirst","nextElementSibling","_onSelected","object","_selectedOption","event","preventDefault","targetClosest","targetClosestRole","hasAttribute","activeClass","activeClassElement","_getTextFromLi","_setAria","_indexLiSelected","_onSubmit","prototype","indexOf","call","keyCode","matchesLength","_selectedLi","selectedElement","stopPropagation","selectedOption","class","title","_clearBtnAriLabel","rerender","inputValue","text","regexText","disable","clearInput","focus","enable","ariaAttributes","_onReset","getElementById","Error","Boolean","_ref4","Promise","resolve","defaultRegex"],"mappings":"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"}