{"version":3,"file":"autocomplete.esm.js","sources":["../../sources/js/utils/function.js","../../sources/js/utils/keyCodes.js","../../sources/js/script.js"],"sourcesContent":["/**\r\n * Check is a Object\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isObject = (value) =>\r\n  value && typeof value === \"object\" && value.constructor === Object;\r\n\r\n/**\r\n * Check if is a Promise\r\n * https://stackoverflow.com/a/53955664/10424385\r\n *\r\n * @param {Object} value\r\n * @returns {Boolean}\r\n */\r\nconst isPromise = (value) => Boolean(value && typeof value.then === \"function\");\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {Object} object\r\n */\r\nconst setAttributes = (el, object) => {\r\n  for (let key in object) {\r\n    if (key === \"addClass\") {\r\n      classList(el, \"add\", object[key]);\r\n    } else if (key === \"removeClass\") {\r\n      classList(el, \"remove\", object[key]);\r\n    } else {\r\n      el.setAttribute(key, object[key]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get first element from child\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {HTMLELement}\r\n */\r\nconst getFirstElement = (element) =>\r\n  (element.firstElementChild || element).textContent.trim();\r\n\r\n/**\r\n * Scroll to top result-list\r\n * @param {HTMLElement} resultList\r\n * @param {HTMLElement} resultWrap\r\n */\r\nconst scrollResultsToTop = (resultList, resultWrap) => {\r\n  // if there is an overflow of ul element, after\r\n  // opening we always move ul to the top of the results\r\n  resultList.scrollTop = resultList.offsetTop - resultWrap.offsetHeight;\r\n};\r\n\r\n/**\r\n * Adding role, tabindex, aria and call handleMouse\r\n *\r\n * @param {HTMLElement} itemsLi\r\n */\r\nconst addAriaToAllLiElements = (itemsLi) => {\r\n  // add role to all li elements\r\n  for (let i = 0; i < itemsLi.length; i++) {\r\n    setAttributes(itemsLi[i], {\r\n      role: \"option\",\r\n      tabindex: \"-1\",\r\n      \"aria-selected\": \"false\",\r\n      \"aria-setsize\": itemsLi.length,\r\n      \"aria-posinset\": i,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Show btn to clear data\r\n *\r\n * @param {HTMLElement} clearButton - button to clear data\r\n * @param {Function} destroy - destroy function\r\n */\r\nconst showBtnToClearData = (clearButton = false, destroy) => {\r\n  if (!clearButton) return;\r\n\r\n  classList(clearButton, \"remove\", \"hidden\");\r\n  // add event to clear button\r\n  onEvent(clearButton, \"click\", destroy);\r\n};\r\n\r\n/**\r\n * ClassList add/remove/contains\r\n *\r\n * @param {HTMLElement} element - html element\r\n * @param {String} action - add/remove/contains\r\n * @param {String} className - class name\r\n */\r\nconst classList = (element, action, className) =>\r\n  element.classList[action](className);\r\n\r\n/**\r\n * Set aria-activedescendant\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {String} type\r\n */\r\nconst setAriaActivedescendant = (root, type) => {\r\n  setAttributes(root, {\r\n    \"aria-activedescendant\": type || \"\",\r\n  });\r\n};\r\n\r\n/**\r\n * Get height of ul without group class\r\n *\r\n * @param {String} outputUl\r\n * @param {String} classGroup\r\n * @returns {Number}\r\n */\r\nconst getClassGroupHeight = (outputUl, classGroup) => {\r\n  // get height of ul without group class\r\n  const allLiElements = document.querySelectorAll(\r\n    `#${outputUl} > li:not(.${classGroup})`,\r\n  );\r\n  let height = 0;\r\n  [].slice.call(allLiElements).map((el) => (height += el.offsetHeight));\r\n\r\n  // return height\r\n  return height;\r\n};\r\n\r\n/**\r\n * Scroll into view when press up/down arrows\r\n *\r\n * @param {HTMLElement} target\r\n * @param {HTMLElement} outputUl\r\n * @param {String} classGroup\r\n * @param {HTMLElement} resultList\r\n */\r\nconst followActiveElement = (target, outputUl, classGroup, resultList) => {\r\n  const previusElement = resultList.previousSibling;\r\n\r\n  const previusElementHeight = previusElement ? previusElement.offsetHeight : 0;\r\n\r\n  if (target.getAttribute(\"aria-posinset\") == \"0\") {\r\n    resultList.scrollTop =\r\n      target.offsetTop - getClassGroupHeight(outputUl, classGroup);\r\n  }\r\n\r\n  if (target.offsetTop - previusElementHeight < resultList.scrollTop) {\r\n    resultList.scrollTop = target.offsetTop - previusElementHeight;\r\n  } else {\r\n    const offsetBottom =\r\n      target.offsetTop + target.offsetHeight - previusElementHeight;\r\n    const scrollBottom = resultList.scrollTop + resultList.offsetHeight;\r\n    if (offsetBottom > scrollBottom) {\r\n      resultList.scrollTop = offsetBottom - resultList.offsetHeight;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Create output-list and put after search input\r\n *\r\n * @param {HTMLElement} root - search input\r\n * @param {HTMLElement} resultList - output-list ul\r\n * @param {String} outputUl - id name of output-list\r\n * @param {HTMLElement} resultWrap - wrapper ul element\r\n * @param {String} prefix - add prefix to all class auto\r\n */\r\nconst output = (root, resultList, outputUl, resultWrap, prefix) => {\r\n  // set attribute to results-list\r\n  setAttributes(resultList, {\r\n    id: outputUl,\r\n    tabIndex: \"0\",\r\n    role: \"listbox\",\r\n  });\r\n\r\n  // add class to wrap element\r\n  setAttributes(resultWrap, {\r\n    addClass: `${prefix}-results-wrapper`,\r\n  });\r\n\r\n  // insert the results into the wrap element\r\n  resultWrap.insertAdjacentElement(\"beforeend\", resultList);\r\n\r\n  // insert the wrap element after the search input\r\n  root.parentNode.insertBefore(resultWrap, root.nextSibling);\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param {String} type - type of element\r\n * @returns {HTMLDivElement}\r\n */\r\nconst createElement = (type) => document.createElement(type);\r\n\r\n/**\r\n * Get element\r\n *\r\n * @param {String} element\r\n * @returns {HTMLElement}\r\n */\r\nconst select = (element) => document.querySelector(element);\r\n\r\n/**\r\n * Event listeners\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} action\r\n * @param {Function} callback\r\n */\r\nconst onEvent = (element, action, callback) => {\r\n  element.addEventListener(action, callback);\r\n};\r\n\r\n/**\r\n * Remove event listeners\r\n */\r\nconst offEvent = (element, action, callback) => {\r\n  element.removeEventListener(action, callback);\r\n};\r\n\r\nexport {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n};\r\n","/**\r\n * Key codes\r\n */\r\nconst keyCodes = {\r\n  ESC: 27,\r\n  ENTER: 13,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  TAB: 9,\r\n};\r\n\r\nexport default keyCodes;\r\n","import {\r\n  addAriaToAllLiElements,\r\n  classList,\r\n  createElement,\r\n  followActiveElement,\r\n  getFirstElement,\r\n  isObject,\r\n  isPromise,\r\n  offEvent,\r\n  onEvent,\r\n  output,\r\n  scrollResultsToTop,\r\n  select,\r\n  setAriaActivedescendant,\r\n  setAttributes,\r\n  showBtnToClearData,\r\n} from \"./utils/function\";\r\n\r\nimport keyCodes from \"./utils/keyCodes\";\r\n\r\n/**\r\n * @class Autocomplete\r\n */\r\nexport default class Autocomplete {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {String} element\r\n   * @param {Object} object\r\n   */\r\n  constructor(\r\n    element,\r\n    {\r\n      delay = 500,\r\n      clearButton = true,\r\n      clearButtonOnInitial = false,\r\n      howManyCharacters = 1,\r\n      selectFirst = false,\r\n      insertToInput = false,\r\n      showAllValues = false,\r\n      cache = false,\r\n      disableCloseOnSelect = false,\r\n      preventScrollUp = false,\r\n      removeResultsWhenInputIsEmpty = false,\r\n      regex = { expression: /[|\\\\{}()[\\]^$+*?]/g, replacement: \"\\\\$&\" },\r\n      classGroup,\r\n      classPreventClosing,\r\n      classPrefix,\r\n      ariaLabelClear,\r\n      onSearch,\r\n      onResults = () => {},\r\n      onSubmit = () => {},\r\n      onOpened = () => {},\r\n      onReset = () => {},\r\n      onRender = () => {},\r\n      onClose = () => {},\r\n      noResults = () => {},\r\n      onSelectedItem = () => {},\r\n    },\r\n  ) {\r\n    this._id = element;\r\n    this._root = document.getElementById(element);\r\n    this._onSearch = isPromise(onSearch)\r\n      ? onSearch\r\n      : ({ currentValue, element }) =>\r\n          Promise.resolve(onSearch({ currentValue, element }));\r\n    this._onResults = onResults;\r\n    this._onRender = onRender;\r\n    this._onSubmit = onSubmit;\r\n    this._onSelected = onSelectedItem;\r\n    this._onOpened = onOpened;\r\n    this._onReset = onReset;\r\n    this._noResults = noResults;\r\n    this._onClose = onClose;\r\n\r\n    this._delay = delay;\r\n    this._characters = howManyCharacters;\r\n    this._clearButton = clearButton;\r\n    this._clearButtonOnInitial = clearButtonOnInitial;\r\n    this._selectFirst = selectFirst;\r\n    this._toInput = insertToInput;\r\n    this._showAll = showAllValues;\r\n    this._classGroup = classGroup;\r\n    this._prevClosing = classPreventClosing;\r\n    this._clearBtnAriLabel = ariaLabelClear\r\n      ? ariaLabelClear\r\n      : \"clear the search query\";\r\n    this._prefix = classPrefix ? `${classPrefix}-auto` : \"auto\";\r\n    this._disable = disableCloseOnSelect;\r\n    this._preventScrollUp = preventScrollUp;\r\n    this._removeResultsWhenInputIsEmpty = removeResultsWhenInputIsEmpty;\r\n\r\n    // default config\r\n    this._cache = cache;\r\n    this._timeout = null;\r\n    this._outputUl = `${this._prefix}-${this._id}-results`;\r\n    this._cacheData = `data-cache-auto-${this._id}`;\r\n    this._isLoading = `${this._prefix}-is-loading`;\r\n    this._isActive = `${this._prefix}-is-active`;\r\n    this._activeList = `${this._prefix}-selected`;\r\n    this._selectedOption = `${this._prefix}-selected-option`;\r\n    this._err = `${this._prefix}-error`;\r\n    this._resultWrap = createElement(\"div\");\r\n    this._resultList = createElement(\"ul\");\r\n    this._clearBtn = createElement(\"button\");\r\n\r\n    // ----------------------------------------\r\n    // regex\r\n\r\n    this._regex = regex;\r\n    this._defaultExpression = {\r\n      expression: /[|\\\\{}()[\\]^$+*?]/g,\r\n      replacement: \"\\\\$&\",\r\n    };\r\n\r\n    // if regex is don't have replacement then set default\r\n    if (!this._regex.replacement) {\r\n      this._regex.replacement = this._defaultExpression.replacement;\r\n    }\r\n\r\n    // if regex is don't have expression then set default\r\n    if (!this._regex.expression) {\r\n      this._regex.expression = this._defaultExpression.expression;\r\n    }\r\n\r\n    // ----------------------------------------\r\n\r\n    this._initial();\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  _initial = () => {\r\n    this._clearbutton();\r\n\r\n    output(\r\n      this._root,\r\n      this._resultList,\r\n      this._outputUl,\r\n      this._resultWrap,\r\n      this._prefix,\r\n    );\r\n\r\n    // default aria\r\n    onEvent(this._root, \"input\", this._handleInput);\r\n\r\n    // show all values on click root input\r\n    this._showAll && onEvent(this._root, \"click\", this._handleInput);\r\n\r\n    // calback functions\r\n    this._onRender({\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // show clear button if\r\n    if (this._clearButtonOnInitial) {\r\n      showBtnToClearData(this._clearBtn, this.destroy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Actions on input\r\n   *\r\n   * @param {String} type - set attribute depending on type\r\n   * @param {String} target\r\n   */\r\n  _cacheAct = (type, target) => {\r\n    if (!this._cache) return;\r\n\r\n    if (type === \"update\") {\r\n      this._root.setAttribute(this._cacheData, target.value);\r\n    } else if (type === \"remove\") {\r\n      this._root.removeAttribute(this._cacheData);\r\n    } else {\r\n      this._root.value = this._root.getAttribute(this._cacheData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle input\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleInput = ({ target, type }) => {\r\n    if (\r\n      this._root.getAttribute(\"aria-expanded\") === \"true\" &&\r\n      type === \"click\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // replace all special characters\r\n    const regex = target.value.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n\r\n    // update data attribute cache\r\n    this._cacheAct(\"update\", target);\r\n\r\n    const delay = this._showAll ? 0 : this._delay;\r\n    // clear timeout\r\n    clearTimeout(this._timeout);\r\n    this._timeout = setTimeout(() => {\r\n      // removeResultsWhenInputIsEmpty\r\n      // remove results when input is empty\r\n      if (this._removeResultsWhenInputIsEmpty) {\r\n        if (target.value.length === 0) {\r\n          this.destroy();\r\n          return;\r\n        }\r\n      }\r\n\r\n      this._searchItem(regex.trim());\r\n    }, delay);\r\n  };\r\n\r\n  /**\r\n   * Default aria\r\n   */\r\n  _reset = () => {\r\n    // remove class isActive\r\n    classList(this._resultWrap, \"remove\", this._isActive);\r\n\r\n    const ariaAcrivedescentDefault = {\r\n      \"aria-owns\": `${this._id}-list`,\r\n      \"aria-expanded\": \"false\",\r\n      \"aria-autocomplete\": \"list\",\r\n      role: \"combobox\",\r\n      removeClass: \"auto-expanded\",\r\n    };\r\n\r\n    const ariaAcrivedescent = this._preventScrollUp\r\n      ? ariaAcrivedescentDefault\r\n      : { ...ariaAcrivedescentDefault, \"aria-activedescendant\": \"\" };\r\n\r\n    // set attributes to root - input\r\n    setAttributes(this._root, ariaAcrivedescent);\r\n\r\n    if (!this._preventScrollUp) {\r\n      // set default aria-selected, remove id and remove class 'auto-selected'\r\n      this._removeAria(select(`.${this._activeList}`));\r\n\r\n      // set index\r\n      this._index = this._selectFirst ? 0 : -1;\r\n    }\r\n\r\n    // remove result when lengh = 0 and insertToInput is false\r\n    // https://github.com/tomickigrzegorz/autocomplete/issues/136\r\n    if ((this._matches?.length == 0 && !this._toInput) || this._showAll) {\r\n      this._resultList.textContent = \"\";\r\n    }\r\n\r\n    // callback function\r\n    this._onClose();\r\n  };\r\n\r\n  /**\r\n   * The async function gets the text from the search\r\n   * and returns the matching array\r\n   *\r\n   * @param {String} value\r\n   */\r\n  _searchItem = (value) => {\r\n    this._value = value;\r\n\r\n    // if searching show loading icon\r\n    this._onLoading(true);\r\n\r\n    // hide button clear\r\n    showBtnToClearData(this._clearBtn, this.destroy);\r\n\r\n    // if there is no value and clearButton is true\r\n    if (value.length == 0 && this._clearButton) {\r\n      classList(this._clearBtn, \"add\", \"hidden\");\r\n    }\r\n\r\n    // if declare characters more then value.len and showAll is false\r\n    // remove class isActive\r\n    if (this._characters > value.length && !this._showAll) {\r\n      this._onLoading();\r\n      return;\r\n    }\r\n\r\n    // callblack function onSearch\r\n    this._onSearch({ currentValue: value, element: this._root })\r\n      .then((result) => {\r\n        const rootValueLength = this._root.value.length;\r\n        const resultLength = result.length;\r\n        // set no result\r\n        this._matches = Array.isArray(result)\r\n          ? result\r\n          : JSON.parse(JSON.stringify(result));\r\n\r\n        this._onLoading();\r\n        this._error();\r\n\r\n        // if use destroy() method\r\n        if (resultLength == 0 && rootValueLength == 0) {\r\n          classList(this._clearBtn, \"add\", \"hidden\");\r\n        }\r\n\r\n        if (resultLength == 0 && rootValueLength) {\r\n          classList(this._root, \"remove\", \"auto-expanded\");\r\n          this._reset();\r\n          this._noResults({\r\n            element: this._root,\r\n            currentValue: value,\r\n            template: this._results,\r\n          });\r\n          this._events();\r\n        } else if (resultLength > 0 || isObject(result)) {\r\n          this._index = this._selectFirst ? 0 : -1;\r\n          this._results();\r\n          this._events();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this._onLoading();\r\n        this._reset();\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Set or remove loading class\r\n   *\r\n   * @param {Boolean} type\r\n   */\r\n  _onLoading = (type) =>\r\n    this._root.parentNode.classList[type ? \"add\" : \"remove\"](this._isLoading);\r\n\r\n  /**\r\n   * Set error class to the root element\r\n   */\r\n  _error = () => classList(this._root, \"remove\", this._err);\r\n\r\n  /**\r\n   * Events\r\n   */\r\n  _events = () => {\r\n    // handle click on keydown [up, down, enter, tab, esc]\r\n    onEvent(this._root, \"keydown\", this._handleKeys);\r\n\r\n    onEvent(this._root, \"click\", this._handleShowItems);\r\n\r\n    // close expanded items\r\n    onEvent(document, \"click\", this._handleDocClick);\r\n\r\n    // temporarily disabled mouseleave\r\n    [\"mousemove\", \"click\"].map((eventType) => {\r\n      onEvent(this._resultList, eventType, this._handleMouse);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Results\r\n   *\r\n   * @param {HTMLElement|String} template - html or string returned from the function,\r\n   * look at the example - https://github.com/tomickigrzegorz/autocomplete/blob/master/docs/js/examples/no-results.js#L30\r\n   */\r\n  _results = (template) => {\r\n    // set attribute to root\r\n    setAttributes(this._root, {\r\n      \"aria-expanded\": \"true\",\r\n      addClass: `${this._prefix}-expanded`,\r\n    });\r\n\r\n    // clear result list\r\n    this._resultList.textContent = \"\";\r\n\r\n    // add all found records to otput ul\r\n    const dataResults =\r\n      this._matches.length === 0\r\n        ? this._onResults({\r\n            currentValue: this._value,\r\n            matches: 0,\r\n            template,\r\n          })\r\n        : this._onResults({\r\n            currentValue: this._value,\r\n            matches: this._matches,\r\n            classGroup: this._classGroup,\r\n          });\r\n\r\n    // add data to ul\r\n    this._resultList.insertAdjacentHTML(\"afterbegin\", dataResults);\r\n\r\n    // add class isActive\r\n    classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n    const checkIfClassGroupExist = this._classGroup\r\n      ? `:not(.${this._classGroup})`\r\n      : \"\";\r\n\r\n    this._itemsLi = document.querySelectorAll(\r\n      `#${this._outputUl} > li${checkIfClassGroupExist}`,\r\n    );\r\n\r\n    // adding role, tabindex and aria\r\n    addAriaToAllLiElements(this._itemsLi);\r\n\r\n    // action on open results\r\n    this._onOpened({\r\n      type: \"results\",\r\n      element: this._root,\r\n      results: this._resultList,\r\n    });\r\n\r\n    // select first element\r\n    this._selectFirstElement();\r\n\r\n    // move the view item to the first item\r\n    // this.resultList.scrollTop = 0;\r\n    // if (this._preventScrollUp) return;\r\n    scrollResultsToTop(this._resultList, this._resultWrap);\r\n  };\r\n\r\n  /**\r\n   * Hangle click on document\r\n   *\r\n   * @param {Event} object\r\n   */\r\n  _handleDocClick = ({ target }) => {\r\n    let disableClose = null;\r\n\r\n    // if 'target' is a ul and 'disableCloseOnSelect'\r\n    // is a 'true' set 'disableClose' on true\r\n    if (\r\n      (target.closest(\"ul\") && this._disable) ||\r\n      // when class classDisableClose\r\n      // then do not not close results\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      disableClose = true;\r\n    }\r\n\r\n    if (target.id !== this._id && !disableClose) {\r\n      this._reset();\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select first element\r\n   */\r\n  _selectFirstElement = () => {\r\n    this._removeAria(select(`.${this._activeList}`));\r\n\r\n    if (!this._selectFirst) {\r\n      return;\r\n    }\r\n\r\n    const { firstElementChild } = this._resultList;\r\n\r\n    const classSelectFirst =\r\n      this._classGroup && this._matches.length > 0 && this._selectFirst\r\n        ? firstElementChild.nextElementSibling\r\n        : firstElementChild;\r\n\r\n    // calback function onSelect when first element is true\r\n    this._onSelected({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n    });\r\n\r\n    // set attribute to first element\r\n    setAttributes(classSelectFirst, {\r\n      id: `${this._selectedOption}-0`,\r\n      addClass: this._activeList,\r\n      \"aria-selected\": \"true\",\r\n    });\r\n\r\n    // set aria active descendant\r\n    setAriaActivedescendant(this._root, `${this._selectedOption}-0`);\r\n  };\r\n\r\n  /**\r\n   * show items when items.length > 0 and is not empty\r\n   */\r\n  _handleShowItems = () => {\r\n    // if resultWrap is not active and resultList is not empty\r\n    if (\r\n      this._resultList.textContent.length > 0 &&\r\n      !classList(this._resultWrap, \"contains\", this._isActive)\r\n    ) {\r\n      // set attribute to root\r\n      setAttributes(this._root, {\r\n        \"aria-expanded\": \"true\",\r\n        addClass: `${this._prefix}-expanded`,\r\n      });\r\n\r\n      // add isActive class to resultWrap\r\n      classList(this._resultWrap, \"add\", this._isActive);\r\n\r\n      // move the view item to the first item\r\n      // this.resultList.scrollTop = 0;\r\n      if (!this._preventScrollUp) {\r\n        scrollResultsToTop(this._resultList, this._resultWrap);\r\n        // select first element\r\n        this._selectFirstElement();\r\n      }\r\n\r\n      // callback function\r\n      this._onOpened({\r\n        type: \"showItems\",\r\n        element: this._root,\r\n        results: this._resultList,\r\n      });\r\n\r\n      if (!this._cache) return;\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adding text from the list when li is clicking\r\n   * or adding aria-selected to li elements\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleMouse = (event) => {\r\n    event.preventDefault();\r\n\r\n    const { target, type } = event;\r\n    const targetClosest = target.closest(\"li\");\r\n    const targetClosestRole = targetClosest?.hasAttribute(\"role\");\r\n    const activeClass = this._activeList;\r\n    const activeClassElement = select(`.${activeClass}`);\r\n\r\n    if (\r\n      !targetClosest ||\r\n      !targetClosestRole ||\r\n      target.closest(`.${this._prevClosing}`)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (type === \"click\") {\r\n      // click on li get element\r\n      // get text from clicked li\r\n      this._getTextFromLi(targetClosest);\r\n    }\r\n\r\n    if (\r\n      type === \"mousemove\" &&\r\n      !classList(targetClosest, \"contains\", activeClass)\r\n    ) {\r\n      this._removeAria(activeClassElement);\r\n\r\n      // add aria to li\r\n      this._setAria(targetClosest);\r\n      this._index = this._indexLiSelected(targetClosest);\r\n\r\n      this._onSelected({\r\n        index: this._index,\r\n        element: this._root,\r\n        object: this._matches[this._index],\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get text from li on enter or click\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _getTextFromLi = (element) => {\r\n    if (!element || this._matches.length === 0) {\r\n      // set default settings\r\n      !this._disable && this._reset();\r\n\r\n      return;\r\n    }\r\n\r\n    // show clearBtn when select element\r\n    this._clearButton && classList(this._clearBtn, \"remove\", \"hidden\");\r\n\r\n    // get first element from li and set it to root\r\n    this._root.value = getFirstElement(element);\r\n\r\n    // onSubmit passing text to function\r\n    this._onSubmit({\r\n      index: this._index,\r\n      element: this._root,\r\n      object: this._matches[this._index],\r\n      results: this._resultList,\r\n    });\r\n\r\n    // set default settings\r\n    if (!this._disable) {\r\n      if (!this._preventScrollUp) {\r\n        this._removeAria(element);\r\n      }\r\n      this._reset();\r\n    }\r\n\r\n    // remove cache\r\n    this._cacheAct(\"remove\");\r\n  };\r\n\r\n  /**\r\n   * Return which li element was selected\r\n   * by hovering the mouse over\r\n   *\r\n   * @param {HTMLElement} target\r\n   * @returns {Number}\r\n   */\r\n  _indexLiSelected = (target) =>\r\n    // get index of li element\r\n    Array.prototype.indexOf.call(this._itemsLi, target);\r\n\r\n  /**\r\n   * Navigating the elements li and enter\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  _handleKeys = (event) => {\r\n    const { keyCode } = event;\r\n\r\n    const resultList = classList(this._resultWrap, \"contains\", this._isActive);\r\n\r\n    const matchesLength = this._matches.length + 1;\r\n    this._selectedLi = select(`.${this._activeList}`);\r\n\r\n    // switch between keys\r\n    switch (keyCode) {\r\n      case keyCodes.UP:\r\n      case keyCodes.DOWN:\r\n        // Wrong cursor position in the input field #62\r\n        // Prevents the cursor from moving to the beginning\r\n        // of input as the cursor hovers over the results.\r\n        event.preventDefault();\r\n\r\n        if ((matchesLength <= 1 && this._selectFirst) || !resultList) {\r\n          return;\r\n        }\r\n\r\n        // if keyCode is up\r\n        if (keyCode === keyCodes.UP) {\r\n          if (this._index < 0) {\r\n            this._index = matchesLength - 1;\r\n          }\r\n          this._index -= 1;\r\n        } else {\r\n          this._index += 1;\r\n          if (this._index >= matchesLength) {\r\n            this._index = 0;\r\n          }\r\n        }\r\n\r\n        // remove aria-selected\r\n        this._removeAria(this._selectedLi);\r\n\r\n        if (this._index >= 0 && this._index < matchesLength - 1) {\r\n          const selectedElement = this._itemsLi[this._index];\r\n\r\n          if (this._toInput && resultList) {\r\n            this._root.value = getFirstElement(selectedElement);\r\n          }\r\n\r\n          // callback function\r\n          this._onSelected({\r\n            index: this._index,\r\n            element: this._root,\r\n            object: this._matches[this._index],\r\n          });\r\n\r\n          // set aria-selected\r\n          this._setAria(selectedElement);\r\n        } else {\r\n          // catch action\r\n          this._cacheAct();\r\n          setAriaActivedescendant(this._root);\r\n\r\n          this._onSelected({\r\n            index: null,\r\n            element: this._root,\r\n            object: null,\r\n          });\r\n        }\r\n\r\n        break;\r\n      // keycode enter\r\n      case keyCodes.ENTER:\r\n        // https:github.com/tomickigrzegorz/autocomplete/issues/145\r\n        event.preventDefault();\r\n\r\n        this._getTextFromLi(this._selectedLi);\r\n        break;\r\n\r\n      // keycode escape and keycode tab\r\n      case keyCodes.TAB:\r\n      case keyCodes.ESC:\r\n        event.stopPropagation();\r\n        this._reset();\r\n\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria label on item li\r\n   *\r\n   * @param {HTMLElement} target\r\n   */\r\n  _setAria = (target) => {\r\n    const selectedOption = `${this._selectedOption}-${this._indexLiSelected(\r\n      target,\r\n    )}`;\r\n\r\n    // set aria to li\r\n    setAttributes(target, {\r\n      id: selectedOption,\r\n      \"aria-selected\": \"true\",\r\n      addClass: this._activeList,\r\n    });\r\n\r\n    setAriaActivedescendant(this._root, selectedOption);\r\n\r\n    // scrollIntoView when press up/down arrows\r\n    followActiveElement(\r\n      target,\r\n      this._outputUl,\r\n      this._classGroup,\r\n      this._resultList,\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove aria label from item li\r\n   *\r\n   * @param {HTMLElement} element\r\n   */\r\n  _removeAria = (element) => {\r\n    if (!element) return;\r\n\r\n    // remove aria from li\r\n    setAttributes(element, {\r\n      id: \"\",\r\n      removeClass: this._activeList,\r\n      \"aria-selected\": \"false\",\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Create clear button and\r\n   * removing text from the input field\r\n   */\r\n  _clearbutton = () => {\r\n    // stop when clear button is disabled\r\n    if (!this._clearButton) return;\r\n\r\n    // add aria to clear button\r\n    setAttributes(this._clearBtn, {\r\n      class: `${this._prefix}-clear hidden`,\r\n      type: \"button\",\r\n      title: this._clearBtnAriLabel,\r\n      \"aria-label\": this._clearBtnAriLabel,\r\n    });\r\n\r\n    // insert clear button after input - root\r\n    this._root.insertAdjacentElement(\"afterend\", this._clearBtn);\r\n  };\r\n\r\n  /**\r\n   * Rerender rows without remove root input and close elements\r\n   */\r\n  rerender = (inputValue) => {\r\n    const text = inputValue?.trim() ? inputValue.trim() : this._root.value;\r\n    if (inputValue?.trim()) {\r\n      this._root.value = inputValue.trim();\r\n      this._cacheAct(\"update\", this._root);\r\n    }\r\n    const regexText = text.replace(\r\n      this._regex.expression,\r\n      this._regex.replacement,\r\n    );\r\n    this._searchItem(regexText.trim());\r\n  };\r\n\r\n  /**\r\n   * Clicking on the clear button\r\n   * publick destroy method\r\n   */\r\n  destroy = () => {\r\n    // if clear button is true then add class hidden\r\n    this._clearButton && classList(this._clearBtn, \"add\", \"hidden\");\r\n    // clear value searchId\r\n    this._root.value = \"\";\r\n    // set focus\r\n    this._root.focus();\r\n    // remove li from ul\r\n    this._resultList.textContent = \"\";\r\n    // set default aria\r\n    this._reset();\r\n    // remove error if exist\r\n    this._error();\r\n    // callback function\r\n    this._onReset(this._root);\r\n    // remove animation on loading\r\n    this._onLoading();\r\n\r\n    // remove listener\r\n    offEvent(this._root, \"keydown\", this._handleKeys);\r\n    offEvent(this._root, \"click\", this._handleShowItems);\r\n    // remove listener on click on document\r\n    offEvent(document, \"click\", this._handleDocClick);\r\n  };\r\n}\r\n"],"names":["isObject","value","constructor","Object","isPromise","Boolean","then","setAttributes","el","object","key","classList","setAttribute","getFirstElement","element","firstElementChild","textContent","trim","scrollResultsToTop","resultList","resultWrap","scrollTop","offsetTop","offsetHeight","addAriaToAllLiElements","itemsLi","i","length","role","tabindex","showBtnToClearData","clearButton","destroy","onEvent","action","className","setAriaActivedescendant","root","type","getClassGroupHeight","outputUl","classGroup","allLiElements","document","querySelectorAll","height","slice","call","map","followActiveElement","target","previusElement","previousSibling","previusElementHeight","getAttribute","offsetBottom","scrollBottom","output","prefix","id","tabIndex","addClass","insertAdjacentElement","parentNode","insertBefore","nextSibling","createElement","select","querySelector","callback","addEventListener","offEvent","removeEventListener","keyCodes","ESC","ENTER","UP","DOWN","TAB","Autocomplete","_ref","delay","clearButtonOnInitial","howManyCharacters","selectFirst","insertToInput","showAllValues","cache","disableCloseOnSelect","preventScrollUp","removeResultsWhenInputIsEmpty","regex","expression","replacement","classPreventClosing","classPrefix","ariaLabelClear","onSearch","onResults","onSubmit","onOpened","onReset","onRender","onClose","noResults","onSelectedItem","_initial","_clearbutton","_root","_resultList","_outputUl","_resultWrap","_prefix","_handleInput","_showAll","_onRender","results","_clearButtonOnInitial","_clearBtn","_cacheAct","_cache","_cacheData","removeAttribute","_ref2","replace","_regex","_delay","clearTimeout","_timeout","setTimeout","_removeResultsWhenInputIsEmpty","_searchItem","_reset","_isActive","ariaAcrivedescentDefault","_id","removeClass","ariaAcrivedescent","_preventScrollUp","_removeAria","_activeList","_index","_selectFirst","_matches","_toInput","_onClose","_value","_onLoading","_clearButton","_characters","_onSearch","currentValue","result","rootValueLength","resultLength","Array","isArray","JSON","parse","stringify","_error","_noResults","template","_results","_events","catch","_isLoading","_err","_handleKeys","_handleShowItems","_handleDocClick","eventType","_handleMouse","dataResults","_onResults","matches","_classGroup","insertAdjacentHTML","checkIfClassGroupExist","_itemsLi","_onOpened","_selectFirstElement","_ref3","disableClose","closest","_disable","_prevClosing","classSelectFirst","nextElementSibling","_onSelected","index","_selectedOption","event","preventDefault","targetClosest","targetClosestRole","hasAttribute","activeClass","activeClassElement","_getTextFromLi","_setAria","_indexLiSelected","_onSubmit","prototype","indexOf","keyCode","matchesLength","_selectedLi","selectedElement","stopPropagation","selectedOption","class","title","_clearBtnAriLabel","rerender","inputValue","text","regexText","focus","_onReset","getElementById","_ref4","Promise","resolve","_defaultExpression"],"mappings":"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"}