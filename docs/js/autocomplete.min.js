/*!
* @name autocomplete
* @version 2.0.0
* @author Grzegorz Tomicki
* @link https://github.com/tomickigrzegorz/autocomplete
* @license MIT
*/
var Autocomplete=function(){"use strict";const t=(t,s)=>{for(let i in s)"addClass"===i?e(t,"add",s[i]):"removeClass"===i?e(t,"remove",s[i]):t.setAttribute(i,s[i])},s=t=>(t.firstElementChild||t).textContent.trim(),i=(t,s)=>{t.scrollTop=t.offsetTop-s.offsetHeight},h=function(t,s){void 0===t&&(t=!1),t&&(e(t,"remove","hidden"),o(t,"click",s))},e=(t,s,i)=>t.classList[s](i),a=(s,i)=>{t(s,{"aria-activedescendant":i||""})},n=(t,s,i,h)=>{const e=h.previousSibling,a=e?e.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(h.scrollTop=t.offsetTop-((t,s)=>{const i=document.querySelectorAll(`#${t} > li:not(.${s})`);let h=0;return[].slice.call(i).map((t=>h+=t.offsetHeight)),h})(s,i)),t.offsetTop-a<h.scrollTop)h.scrollTop=t.offsetTop-a;else{const s=t.offsetTop+t.offsetHeight-a;s>h.scrollTop+h.offsetHeight&&(h.scrollTop=s-h.offsetHeight)}},l=t=>document.createElement(t),r=t=>document.querySelector(t),o=(t,s,i)=>{t.addEventListener(s,i)},c=(t,s,i)=>{t.removeEventListener(s,i)},d=27,u=13,m=38,p=40,$=9;return class{constructor(v,b){let{delay:f=500,clearButton:x=!0,clearButtonOnInitial:y=!1,howManyCharacters:C=1,selectFirst:k=!1,insertToInput:g=!1,showAllValues:w=!1,cache:j=!1,disableCloseOnSelect:I=!1,preventScrollUp:S=!1,removeResultsWhenInputIsEmpty:V=!1,regex:O={expression:/[|\\{}()[\]^$+*?]/g,replacement:"\\$&"},classGroup:R,classPreventClosing:A,classPrefix:B,ariaLabelClear:P,onSearch:T,onResults:E=(()=>{}),onSubmit:G=(()=>{}),onOpened:J=(()=>{}),onReset:N=(()=>{}),onRender:q=(()=>{}),onClose:z=(()=>{}),noResults:F=(()=>{}),onSelectedItem:L=(()=>{})}=b;var M;this.t=()=>{var s,i,e,a,n;this.i(),s=this.h,i=this.l,e=this.o,a=this.u,n=this.m,t(i,{id:e,tabIndex:"0",role:"listbox"}),t(a,{addClass:`${n}-results-wrapper`}),a.insertAdjacentElement("beforeend",i),s.parentNode.insertBefore(a,s.nextSibling),o(this.h,"input",this.p),this.$&&o(this.h,"click",this.p),this.v({element:this.h,results:this.l}),this.C&&h(this.k,this.destroy)},this.j=(t,s)=>{this.I&&("update"===t?this.h.setAttribute(this.S,s.value):"remove"===t?this.h.removeAttribute(this.S):this.h.value=this.h.getAttribute(this.S))},this.p=t=>{let{target:s,type:i}=t;if("true"===this.h.getAttribute("aria-expanded")&&"click"===i)return;const h=s.value.replace(this.V.expression,this.V.replacement);this.j("update",s);const e=this.$?0:this.O;clearTimeout(this.R),this.R=setTimeout((()=>{this.A&&0===s.value.length?this.destroy():this.B(h.trim())}),e)},this.P=()=>{e(this.u,"remove",this.T);const s={"aria-owns":`${this.G}-list`,"aria-expanded":"false","aria-autocomplete":"list",role:"combobox",removeClass:"auto-expanded"},i=this.J?s:{...s,"aria-activedescendant":""};t(this.h,i),this.J||(this.N(r(`.${this.q}`)),this.F=this.L?0:-1),(0==this.M?.length&&!this.U||this.$)&&(this.l.textContent=""),this.W()},this.B=t=>{this.D=t,this.H(!0),h(this.k,this.destroy),0==t.length&&this.K&&e(this.k,"add","hidden"),this.X>t.length&&!this.$?this.H():this.Y({currentValue:t,element:this.h}).then((s=>{const i=this.h.value.length,h=s.length;this.M=Array.isArray(s)?s:JSON.parse(JSON.stringify(s)),this.H(),this.Z(),0==h&&0==i&&e(this.k,"add","hidden"),0==h&&i?(e(this.h,"remove","auto-expanded"),this.P(),this._({element:this.h,currentValue:t,template:this.tt}),this.st()):(h>0||(t=>t&&"object"==typeof t&&t.constructor===Object)(s))&&(this.F=this.L?0:-1,this.tt(),this.st())})).catch((()=>{this.H(),this.P()}))},this.H=t=>this.h.parentNode.classList[t?"add":"remove"](this.it),this.Z=()=>e(this.h,"remove",this.ht),this.st=()=>{o(this.h,"keydown",this.et),o(this.h,"click",this.nt),o(document,"click",this.lt),["mousemove","click"].map((t=>{o(this.l,t,this.rt)}))},this.tt=s=>{t(this.h,{"aria-expanded":"true",addClass:`${this.m}-expanded`}),this.l.textContent="";const h=0===this.M.length?this.ot({currentValue:this.D,matches:0,template:s}):this.ot({currentValue:this.D,matches:this.M,classGroup:this.ct});this.l.insertAdjacentHTML("afterbegin",h),e(this.u,"add",this.T);const a=this.ct?`:not(.${this.ct})`:"";this.dt=document.querySelectorAll(`#${this.o} > li${a}`),(s=>{for(let i=0;i<s.length;i++)t(s[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":s.length,"aria-posinset":i})})(this.dt),this.ut({type:"results",element:this.h,results:this.l}),this.$t(),i(this.l,this.u)},this.lt=t=>{let{target:s}=t,i=null;(s.closest("ul")&&this.vt||s.closest(`.${this.bt}`))&&(i=!0),s.id===this.G||i||this.P()},this.$t=()=>{if(this.N(r(`.${this.q}`)),!this.L)return;const{firstElementChild:s}=this.l,i=this.ct&&this.M.length>0&&this.L?s.nextElementSibling:s;this.ft({index:this.F,element:this.h,object:this.M[this.F]}),t(i,{id:`${this.xt}-0`,addClass:this.q,"aria-selected":"true"}),a(this.h,`${this.xt}-0`)},this.nt=()=>{if(this.l.textContent.length>0&&!e(this.u,"contains",this.T)){if(t(this.h,{"aria-expanded":"true",addClass:`${this.m}-expanded`}),e(this.u,"add",this.T),this.J||(i(this.l,this.u),this.$t()),this.ut({type:"showItems",element:this.h,results:this.l}),!this.I)return;this.j("update",this.h)}},this.rt=t=>{t.preventDefault();const{target:s,type:i}=t,h=s.closest("li"),a=h?.hasAttribute("role"),n=this.q,l=r(`.${n}`);h&&a&&!s.closest(`.${this.bt}`)&&("click"===i&&this.yt(h),"mousemove"!==i||e(h,"contains",n)||(this.N(l),this.Ct(h),this.F=this.kt(h),this.ft({index:this.F,element:this.h,object:this.M[this.F]})))},this.yt=t=>{t&&0!==this.M.length?(this.K&&e(this.k,"remove","hidden"),this.h.value=s(t),this.gt({index:this.F,element:this.h,object:this.M[this.F],results:this.l}),this.vt||(this.J||this.N(t),this.P()),this.j("remove")):!this.vt&&this.P()},this.kt=t=>Array.prototype.indexOf.call(this.dt,t),this.et=t=>{const{keyCode:i}=t,h=e(this.u,"contains",this.T),n=this.M.length+1;switch(this.wt=r(`.${this.q}`),i){case m:case p:if(t.preventDefault(),n<=1&&this.L||!h)return;if(i===m?(this.F<0&&(this.F=n-1),this.F-=1):(this.F+=1,this.F>=n&&(this.F=0)),this.N(this.wt),this.F>=0&&this.F<n-1){const t=this.dt[this.F];this.U&&h&&(this.h.value=s(t)),this.ft({index:this.F,element:this.h,object:this.M[this.F]}),this.Ct(t)}else this.j(),a(this.h),this.ft({index:null,element:this.h,object:null});break;case u:t.preventDefault(),this.yt(this.wt);break;case $:case d:t.stopPropagation(),this.P()}},this.Ct=s=>{const i=`${this.xt}-${this.kt(s)}`;t(s,{id:i,"aria-selected":"true",addClass:this.q}),a(this.h,i),n(s,this.o,this.ct,this.l)},this.N=s=>{s&&t(s,{id:"",removeClass:this.q,"aria-selected":"false"})},this.i=()=>{this.K&&(t(this.k,{class:`${this.m}-clear hidden`,type:"button",title:this.jt,"aria-label":this.jt}),this.h.insertAdjacentElement("afterend",this.k))},this.rerender=t=>{const s=t?.trim()?t.trim():this.h.value;t?.trim()&&(this.h.value=t.trim(),this.j("update",this.h));const i=s.replace(this.V.expression,this.V.replacement);this.B(i.trim())},this.destroy=()=>{this.K&&e(this.k,"add","hidden"),this.h.value="",this.h.focus(),this.l.textContent="",this.P(),this.Z(),this.It(this.h),this.H(),c(this.h,"keydown",this.et),c(this.h,"click",this.nt),c(document,"click",this.lt)},this.G=v,this.h=document.getElementById(v),this.Y=(M=T,Boolean(M&&"function"==typeof M.then)?T:t=>{let{currentValue:s,element:i}=t;return Promise.resolve(T({currentValue:s,element:i}))}),this.ot=E,this.v=q,this.gt=G,this.ft=L,this.ut=J,this.It=N,this._=F,this.W=z,this.O=f,this.X=C,this.K=x,this.C=y,this.L=k,this.U=g,this.$=w,this.ct=R,this.bt=A,this.jt=P||"clear the search query",this.m=B?`${B}-auto`:"auto",this.vt=I,this.J=S,this.A=V,this.I=j,this.R=null,this.o=`${this.m}-${this.G}-results`,this.S=`data-cache-auto-${this.G}`,this.it=`${this.m}-is-loading`,this.T=`${this.m}-is-active`,this.q=`${this.m}-selected`,this.xt=`${this.m}-selected-option`,this.ht=`${this.m}-error`,this.u=l("div"),this.l=l("ul"),this.k=l("button"),this.V=O,this.St={expression:/[|\\{}()[\]^$+*?]/g,replacement:"\\$&"},this.V.replacement||(this.V.replacement=this.St.replacement),this.V.expression||(this.V.expression=this.St.expression),this.t()}}}();
//# sourceMappingURL=autocomplete.min.js.map
